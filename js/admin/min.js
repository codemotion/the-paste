(function(){var e,t,a,i,n;e=window.jQuery,e.paste=function(e){var a;return"undefined"!=typeof console&&null!==console&&console.log("DEPRECATED: This method is deprecated. Please use $.fn.pastableNonInputable() instead."),a=t.mountNonInputable(e),a._container},e.fn.pastableNonInputable=function(){var a,i,n,r;for(r=this,i=0,n=r.length;i<n;i++)a=r[i],a._pastable||e(a).is("textarea, input:text, [contenteditable]")||(t.mountNonInputable(a),a._pastable=!0);return this},e.fn.pastableTextarea=function(){var a,i,n,r;for(r=this,i=0,n=r.length;i<n;i++)a=r[i],a._pastable||e(a).is(":not(textarea, input:text)")||(t.mountTextarea(a),a._pastable=!0);return this},e.fn.pastableContenteditable=function(){var a,i,n,r;for(r=this,i=0,n=r.length;i<n;i++)a=r[i],a._pastable||e(a).is(":not([contenteditable])")||(t.mountContenteditable(a),a._pastable=!0);return this},i=function(e,t){var a,i,n,r,o,s,l,p,d,u,c;if(null==t&&(t=512),!(p=e.match(/^data\:([^\;]+)\;base64\,(.+)$/)))return null;for(u=p,p=u[0],s=u[1],a=u[2],r=atob(a),n=[],d=0;d<r.length;){for(c=r.slice(d,d+t),o=new Array(c.length),l=0;l<c.length;)o[l]=c.charCodeAt(l),l++;i=new Uint8Array(o),n.push(i),d+=t}return new Blob(n,{type:s})},a=function(){return e(document.createElement("div")).attr("contenteditable",!0).attr("aria-hidden",!0).attr("tabindex",-1).css({width:1,height:1,position:"fixed",left:-100,overflow:"hidden"})},n=function(t,a){var i,n,r,o,s,l;return o=void 0,s=void 0,r=void 0,n=void 0,i=void 0,"area"===(l=t.nodeName.toLowerCase())?(o=t.parentNode,s=o.name,!(!t.href||!s||"map"!==o.nodeName.toLowerCase())&&(r=e("img[usemap='#"+s+"']"),r.length>0&&r.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(l)?(n=!t.disabled)&&(i=e(t).closest("fieldset")[0])&&(n=!i.disabled):n="a"===l?t.href||a:a,(n=n||e(t).is("[contenteditable]"))&&e(t).is(":visible"))},t=function(){function t(t,a){this._container=t,this._target=a,this._container=e(this._container),this._target=e(this._target).addClass("pastable"),this._container.on("paste",function(e){return function(t){var a,i,n,r,o,s,l,p,d,u,c,h,g;if(t.currentTarget!==t.target)return t.preventDefault();if(e._paste_event_fired=!0,null!=(null!=(d=t.originalEvent)?d.clipboardData:void 0))if(a=t.originalEvent.clipboardData,a.items)for(u=a.items,r=0,s=u.length;r<s;r++){if(n=u[r],n.type.match(/^image\//)){p=new FileReader,p.onload=function(t){return e._handleImage(t.target.result)};try{p.readAsDataURL(n.getAsFile())}catch(e){}t.preventDefault();break}"text/plain"===n.type&&n.getAsString(function(t){return e._target.trigger("pasteText",{text:t})})}else-1!==Array.prototype.indexOf.call(a.types,"text/plain")&&(g=a.getData("Text"),setTimeout(function(){return e._target.trigger("pasteText",{text:g})},1)),e._checkImagesInContainer(function(t){return e._handleImage(t)});if(a=window.clipboardData)if(null!=(c=g=a.getData("Text"))?c.length:void 0)setTimeout(function(){return e._target.trigger("pasteText",{text:g}),e._target.trigger("_pasteCheckContainerDone")},1);else{for(h=a.files,o=0,l=h.length;o<l;o++)i=h[o],e._handleImage(URL.createObjectURL(i));e._checkImagesInContainer(function(e){})}return null}}(this))}return t.prototype._target=null,t.prototype._container=null,t.mountNonInputable=function(i){var r;return r=new t(a().appendTo(i),i),e(i).on("click",function(e){return function(e){if(!n(e.target,!1))return r._container.focus()}}()),r._container.on("focus",function(t){return function(){return e(i).addClass("pastable-focus")}}()),r._container.on("blur",function(t){return function(){return e(i).removeClass("pastable-focus")}}())},t.mountTextarea=function(i){var n,r,o,s;return("undefined"!=typeof DataTransfer&&null!==DataTransfer?DataTransfer.prototype:void 0)&&(null!=(o=Object.getOwnPropertyDescriptor)&&null!=(s=o.call(Object,DataTransfer.prototype,"items"))?s.get:void 0)?this.mountContenteditable(i):(r=new t(a().insertBefore(i),i),n=!1,e(i).on("keyup",function(e){var t;return 17!==(t=e.keyCode)&&224!==t||(n=!1),null}),e(i).on("keydown",function(t){var a;return 17!==(a=t.keyCode)&&224!==a||(n=!0),null!=t.ctrlKey&&null!=t.metaKey&&(n=t.ctrlKey||t.metaKey),n&&86===t.keyCode&&(r._textarea_focus_stolen=!0,r._container.focus(),r._paste_event_fired=!1,setTimeout(function(t){return function(){if(!r._paste_event_fired)return e(i).focus(),r._textarea_focus_stolen=!1}}(),1)),null}),e(i).on("paste",function(e){return function(){}}()),e(i).on("focus",function(t){return function(){if(!r._textarea_focus_stolen)return e(i).addClass("pastable-focus")}}()),e(i).on("blur",function(t){return function(){if(!r._textarea_focus_stolen)return e(i).removeClass("pastable-focus")}}()),e(r._target).on("_pasteCheckContainerDone",function(t){return function(){return e(i).focus(),r._textarea_focus_stolen=!1}}()),e(r._target).on("pasteText",function(t){return function(t,a){var n,r,o;return o=e(i).prop("selectionStart"),r=e(i).prop("selectionEnd"),n=e(i).val(),e(i).val(""+n.slice(0,o)+a.text+n.slice(r)),e(i)[0].setSelectionRange(o+a.text.length,o+a.text.length),e(i).trigger("change")}}()))},t.mountContenteditable=function(a){return new t(a,a),e(a).on("focus",function(t){return function(){return e(a).addClass("pastable-focus")}}()),e(a).on("blur",function(t){return function(){return e(a).removeClass("pastable-focus")}}())},t.prototype._handleImage=function(e){var t;return e.match(/^webkit\-fake\-url\:\/\//)?this._target.trigger("pasteImageError",{message:"You are trying to paste an image in Safari, however we are unable to retieve its data."}):(this._target.trigger("pasteImageStart"),t=new Image,t.crossOrigin="anonymous",t.onload=function(e){return function(){var a,n,r,o;n=document.createElement("canvas"),n.width=t.width,n.height=t.height,r=n.getContext("2d"),r.drawImage(t,0,0,n.width,n.height),o=null;try{o=n.toDataURL("image/png"),a=i(o)}catch(e){}return o&&e._target.trigger("pasteImage",{blob:a,dataURL:o,width:t.width,height:t.height}),e._target.trigger("pasteImageEnd")}}(this),t.onerror=function(t){return function(){return t._target.trigger("pasteImageError",{message:"Failed to get image from: "+e,url:e}),t._target.trigger("pasteImageEnd")}}(this),t.src=e)},t.prototype._checkImagesInContainer=function(t){var a,i,n,r,o;for(o=Math.floor(1e3*Math.random()),r=this._container.find("img"),i=0,n=r.length;i<n;i++)a=r[i],a["_paste_marked_"+o]=!0;return setTimeout(function(i){return function(){var n,r,s;for(s=i._container.find("img"),n=0,r=s.length;n<r;n++)a=s[n],a["_paste_marked_"+o]||(t(a.src),e(a).remove());return i._target.trigger("_pasteCheckContainerDone")}}(this),1)},t}()}).call(this),function(e,t,a){var i=(navigator.userAgent.indexOf("Chrome"),0);thepaste=t.thepaste=e.extend({supports:{paste:"paste"in document||"onpaste"in document||"object"==typeof window.onpaste||"onpaste"in document.createElement("DIV")},view:{},uploadImage:function(t,n,r){var o="__thepaste_box_"+i++,s=e(t).wrap('<div id="'+o+'" data-progress="0" class="thepaste-image-placeholder" contenteditable="false"></div>').parent();t.onload=function(){e(n.$("#"+o)).width(this.naturalWidth),e(n.$("#"+o)).height(this.naturalHeight)};var l,p,d=t.src,u=d.substr(0,5),c=function(t){var i=t.match(/^data\:([^\;]+)\;/)[1],r=new a.Blob(null,{data:t}),s=thepaste.options.mime_types.convert[i],l=e('#post [name="post_title"]#title').val();void 0===s&&console.trace("Won't upload, bad mime type: "+i),void 0!==l?(l=l.replace(/([\^\!\?<>:"'\/\|\*ยง])/g,"").replace(/ +/g," "),r.name=thepaste.l10n.pasted_into+" "+l+"."+s):r.name=thepaste.l10n.pasted+"."+s,r.type=i;var u=function(){p.uploader.uploader.uploader.addFile(r)};p?(p.state().reset(),u()):(p=wp.media.editor.open(window.wpActiveEditor,{frame:"post",state:"insert",title:thepaste.l10n.copy_paste,multiple:!1}),p.close(),p.uploader.uploader&&p.uploader.uploader.ready?u():p.on("uploader:ready",u)),p.uploader.uploader.uploader.bind("UploadProgress",function(e){n.$("#"+o).attr("data-progress",e.total.percent)}),p.uploader.uploader.uploader.bind("FileUploaded",function(t,a){var i=n.$("#"+o),r='<img class="alignnone wp-image-'+a.attachment.id+' size-full" src="'+a.attachment.changed.url+'" />';i.replaceWith(r),n.$('img[src="'+d+'"]').each(function(){e(this).replaceWith(r)})}),p.uploader.uploader.uploader.bind("Error",function(e,t){console.log(e,t)})};return"blob:"===u?(l=new XMLHttpRequest,l.responseType="blob",l.onreadystatechange=function(){var e;4==l.readyState&&(e=new FileReader,e.onload=function(){c(e.result)},e.readAsDataURL(new Blob([l.response],{type:"image/png"})))},l.open("GET",d),l.send(null)):"data:"===u&&c(d),s},clipboardHasImage:function(t){var a=!1;return t.items?(e.each(t.items,function(e,t){if(t.type in thepaste.options.mime_types.paste)return a=!0,!1}),a):t.types?(e.each(thepaste.options.mime_types.paste,function(e,i){if(t.types.indexOf(e)>-1)return a=!0,!1}),a):null}},thepaste)}(jQuery,wp.media,mOxie),function(e,t){var a=wp.media.thepaste.l10n;e.extend(wp.Uploader.prototype,{success:function(e){}}),_.extend(wp.media.view.MediaFrame.Select.prototype,{_parentInitialize:wp.media.view.MediaFrame.Select.prototype.initialize,initialize:function(){this._parentInitialize.apply(this,arguments),this.bindPasteHandlers()},_parentBrowseRouter:wp.media.view.MediaFrame.Select.prototype.browseRouter,browseRouter:function(e){this._parentBrowseRouter.apply(this,arguments),wp.media.thepaste.supports.paste&&e.set({pasteboard:{text:a.copy_paste,priority:35}})},bindPasteHandlers:function(){var e=!1;this.on("content:render close",function(t){e&&"function"==typeof e.dismiss&&e.dismiss(),void 0!==t&&(e=t)},this),this.on("content:create:pasteboard",this.contentCreatePasteboard,this),this.on("content:render:pasteboard",this.contentRenderGrabber,this),this.on("content:create:dataimage",this.contentRenderGrabber,this),frame=this},contentCreatePasteboard:function(e){this.state();this.currentPasteView=e.view=new wp.media.thepaste.view.DataSourceImageGrabber({controller:this,grabber:wp.media.thepaste.view.Pasteboard}),this.listenTo(this.currentPasteView.uploader,"action:uploaded:dataimage",this.uploadedDataImage)},contentRenderGrabber:function(e){e.startGrabbing()},uploadedDataImage:function(e){this.stopListening(this.currentPasteView.uploader,"action:uploaded:dataimage");var t={view:null};this.browseContent(t),this.content.set(t.view),this.router.get().select("browse")},imagePasted:function(){console.log(this)}}),_.extend(wp.media.view.AttachmentsBrowser.prototype,{_parentInitialize:wp.media.view.AttachmentsBrowser.prototype.initialize,initialize:function(){var e,t=this;this._parentInitialize.apply(this,arguments),this.thepaste={paste:{grabber:!1,modal:!1,mode:"paste"},current:!1},this.controller instanceof wp.media.view.MediaFrame.Select||wp.media.thepaste.supports.paste&&(e=new wp.media.view.Button({text:a.copy_paste,className:"grabber-button",priority:-64,click:function(){t.thepaste.active=t.thepaste.paste,t.thepasteOpen(a.copy_paste)}}),this.thepaste.paste.grabber=new wp.media.thepaste.view.DataSourceImageGrabber({controller:this.controller,grabber:wp.media.thepaste.view.Pasteboard,wpuploader:this.controller.uploader.uploader.uploader}),this.toolbar.set("pasteModeButton",e.render()))},thepasteOpen:function(e){var t=this;this.thepaste.modal=new wp.media.view.Modal({controller:this,title:e}),this.thepaste.modal.content(this.thepaste.active.grabber),this.thepaste.modal.open(),this.thepaste.modal.on("close",function(){t.thepasteClose(),t.thepaste.active.grabber.stopGrabbing()}),this.thepaste.active.grabber.startGrabbing(),this.listenTo(this.thepaste.active.grabber.uploader,"action:upload:dataimage",this.thepasteClose)},thepasteClose:function(){this.thepaste.modal.close(),this.stopListening(this.thepaste.active.grabber.uploader,"action:upload:dataimage")}})}(jQuery,window),function(e,t,a){var i=wp.media.thepaste,n=(wp.media.view.Button,wp.media.view.Modal,i.l10n);wp.media.thepaste.view.DataSourceImageUploader=wp.media.View.extend({template:wp.template("thepaste-uploader"),className:"thepaste-uploader",controller:null,image:null,$discardBtn:null,$uploadBtn:null,uploader:null,events:{'click [data-action="upload"]':"uploadImage",'click [data-action="discard"]':"discardImage"},initialize:function(){wp.media.View.prototype.initialize.apply(this,arguments),_.defaults(this.options,{defaultFileName:n.image});new wp.media.View({tagName:"div",className:"instruments",controller:this.controller});this.uploader=this.options.uploder},setImageData:function(e){var t=this.$imageContainer.html("").get(0),n=this,r=e.match(/data:(image\/(\w+));/)[1];return i.options.mime_types.convert[r]||(r=this.options.defaultFileFormat),this.image&&this.image.destroy(),this.image=new a.Image,this.image.onload=function(){var e=n.getUploader().getOption("resize"),a=Math.max(e.width/this.width,e.height/this.height);!!e&&a<1&&this.downsize(this.width*a,this.height*a),this.embed(t)},this.image.load(e),this.$imageContainer&&this.$imageContainer.append(this.image),this.$('[data-setting="format"] input[value="'+r+'"]').prop("checked",!0),this.disabled(!1),this},render:function(){return wp.media.View.prototype.render.apply(this,arguments),this.$imageContainer=this.$(".image-container"),this.$discardBtn=this.$('[data-action="discard"]'),this.$uploadBtn=this.$('[data-action="upload"]'),this.$('[data-setting="title"]').val(this.options.defaultFileName),this},discardImage:function(){this.trigger("action:discard:dataimage",this),this.unbindUploaderEvents()},uploadImage:function(){var e=this.$('[data-setting="format"] :checked').val(),t=i.options.mime_types.convert[e],a=this.$('input[data-setting="title"]').val()+"."+t,n=this.image.getAsBlob(e,i.options.jpeg_quality);this.bindUploaderEvents(),n.detach(n.getSource()),n.name=a,n.type=e,this.getUploader().addFile(n,a),this.disabled(!0),this.trigger("action:upload:dataimage",this)},show:function(){return this.$el.show(),this},hide:function(){return this.$el.hide(),this},disabled:function(e){this.$discardBtn.prop("disabled",e),this.$uploadBtn.prop("disabled",e)},_uploadSuccessHandler:function(){this.trigger("action:uploaded:dataimage"),this.disabled(!1),this.unbindUploaderEvents()},_uploadErrorHandler:function(e,t){this.trigger("error:uploaded:dataimage",t),this.disabled(!1),this.unbindUploaderEvents()},bindUploaderEvents:function(){this.getUploader().bind("FileUploaded",this._uploadSuccessHandler,this),this.getUploader().bind("Error",this._uploadErrorHandler,this)},unbindUploaderEvents:function(){this.getUploader().unbind("FileUploaded",this._uploadSuccessHandler,this),this.getUploader().unbind("Error",this._uploadErrorHandler,this)},getUploader:function(){return this.controller.uploader.uploader.uploader}}),wp.media.thepaste.view.Pasteboard=wp.media.View.extend({template:wp.template("thepaste-pasteboard"),className:"thepaste-pasteboard",controller:null,action:"paste",$pasteboard:null,render:function(){var e=this;return wp.media.View.prototype.render.apply(this,arguments),console.log(this.$(".injector")),this.$pasteboard=this.$(".injector").pastableContenteditable(),this.$message=this.$(".message"),this.$pasteboard.on("click",function(){e.show_message("")}),this},start:function(){var t,a=this;return this.imagePasted=!1,this.$pasteboard.on("paste",function(e){t=wp.media.thepaste.clipboardHasImage(e.originalEvent.clipboardData)}).on("pasteText",function(i,r){t||a.imagePasted||(a.show_message(n.paste_error_no_image),e(this).html(""))}).on("pasteImage",function(e,t){a.imagePasted||(a.trigger("action:create:dataimage",this,t.dataURL),a.imagePasted=!0)}).on("pasteImageError",function(t,i){a.show_message(n.paste_error),e(this).html("")}),setTimeout(function(){a.$pasteboard.get(0).focus()},1),this},stop:function(){return this.$pasteboard.off("pasteImage").off("pasteImageError").off("pasteText"),this},show:function(){return this.$el.show(),this},hide:function(){return this.$el.hide(),this},show_message:function(e){this.$message.text(e)}}),wp.media.thepaste.view.DataSourceImageGrabber=wp.media.View.extend({template:wp.template("thepaste-grabber"),className:"thepaste-grabber",grabber:null,uploader:null,initialize:function(){var e=wp.media.View.prototype.initialize.apply(this,arguments);return _.defaults(this.options,{wpuploader:null,defaultFileName:n.pasted,defaultFileFormat:"image/png",title:n.copy_paste}),this.grabber=new this.options.grabber({controller:this.controller}),this.uploader=new wp.media.thepaste.view.DataSourceImageUploader({controller:this.controller,uploder:this.options.wpuploader,defaultFileName:this.options.defaultFileName,defaultFileFormat:this.options.defaultFileFormat}),this.render(),this.listenTo(this.grabber,"action:create:dataimage",this.imageCreated),this.listenTo(this.uploader,"action:discard:dataimage",this.startGrabbing),e},render:function(){return wp.media.View.prototype.render.apply(this,arguments),this.$(".content").append(this.grabber.render().$el).append(this.uploader.render().$el),this},imageCreated:function(e,t){this.grabber.stop().hide(),this.uploader.show().setImageData(t)},startGrabbing:function(){return this.uploader.hide(),this.grabber.show().start(),this},stopGrabbing:function(){return this.grabber.stop(),this},getAction:function(){return this.grabber.action},dismiss:function(){return this.grabber.stop(),this}})}(jQuery,window,mOxie);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3RlLmpzIiwidGhlLXBhc3RlLWJhc2UuanMiLCJ0aGUtcGFzdGUuanMiLCJtZWRpYS12aWV3LmpzIl0sIm5hbWVzIjpbIiQiLCJQYXN0ZSIsImNyZWF0ZUhpZGRlbkVkaXRhYmxlIiwiZGF0YVVSTHRvQmxvYiIsImlzRm9jdXNhYmxlIiwid2luZG93IiwialF1ZXJ5IiwicGFzdGUiLCJwYXN0ZUNvbnRhaW5lciIsInBtIiwiY29uc29sZSIsImxvZyIsIm1vdW50Tm9uSW5wdXRhYmxlIiwiX2NvbnRhaW5lciIsImZuIiwicGFzdGFibGVOb25JbnB1dGFibGUiLCJlbCIsImoiLCJsZW4iLCJyZWYiLCJ0aGlzIiwibGVuZ3RoIiwiX3Bhc3RhYmxlIiwiaXMiLCJwYXN0YWJsZVRleHRhcmVhIiwibW91bnRUZXh0YXJlYSIsInBhc3RhYmxlQ29udGVudGVkaXRhYmxlIiwibW91bnRDb250ZW50ZWRpdGFibGUiLCJkYXRhVVJMIiwic2xpY2VTaXplIiwiYjY0RGF0YSIsImJ5dGVBcnJheSIsImJ5dGVBcnJheXMiLCJieXRlQ2hhcmFjdGVycyIsImJ5dGVOdW1iZXJzIiwiY29udGVudFR5cGUiLCJpIiwibSIsIm9mZnNldCIsInNsaWNlIiwibWF0Y2giLCJhdG9iIiwiQXJyYXkiLCJjaGFyQ29kZUF0IiwiVWludDhBcnJheSIsInB1c2giLCJCbG9iIiwidHlwZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImF0dHIiLCJjc3MiLCJ3aWR0aCIsImhlaWdodCIsInBvc2l0aW9uIiwibGVmdCIsIm92ZXJmbG93IiwiZWxlbWVudCIsImhhc1RhYmluZGV4IiwiZmllbGRzZXQiLCJmb2N1c2FibGVJZlZpc2libGUiLCJpbWciLCJtYXAiLCJtYXBOYW1lIiwibm9kZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsInBhcmVudE5vZGUiLCJuYW1lIiwiaHJlZiIsInRlc3QiLCJkaXNhYmxlZCIsImNsb3Nlc3QiLCJfdGFyZ2V0IiwiYWRkQ2xhc3MiLCJvbiIsIl90aGlzIiwiZXYiLCJjbGlwYm9hcmREYXRhIiwiZmlsZSIsIml0ZW0iLCJrIiwibGVuMSIsInJlYWRlciIsInJlZjEiLCJyZWYyIiwicmVmMyIsInRleHQiLCJjdXJyZW50VGFyZ2V0IiwidGFyZ2V0IiwicHJldmVudERlZmF1bHQiLCJfcGFzdGVfZXZlbnRfZmlyZWQiLCJvcmlnaW5hbEV2ZW50IiwiaXRlbXMiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiZXZlbnQiLCJfaGFuZGxlSW1hZ2UiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIiwiZ2V0QXNGaWxlIiwiZXJyb3IiLCJnZXRBc1N0cmluZyIsInN0cmluZyIsInRyaWdnZXIiLCJwcm90b3R5cGUiLCJpbmRleE9mIiwiY2FsbCIsInR5cGVzIiwiZ2V0RGF0YSIsInNldFRpbWVvdXQiLCJfY2hlY2tJbWFnZXNJbkNvbnRhaW5lciIsInNyYyIsImZpbGVzIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwibm9uSW5wdXRhYmxlIiwiYXBwZW5kVG8iLCJmb2N1cyIsInJlbW92ZUNsYXNzIiwidGV4dGFyZWEiLCJjdGxEb3duIiwiRGF0YVRyYW5zZmVyIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0IiwiaW5zZXJ0QmVmb3JlIiwia2V5Q29kZSIsImN0cmxLZXkiLCJtZXRhS2V5IiwiX3RleHRhcmVhX2ZvY3VzX3N0b2xlbiIsImRhdGEiLCJjb250ZW50IiwiY3VyRW5kIiwiY3VyU3RhcnQiLCJwcm9wIiwidmFsIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJjb250ZW50ZWRpdGFibGUiLCJsb2FkZXIiLCJtZXNzYWdlIiwiSW1hZ2UiLCJjcm9zc09yaWdpbiIsImJsb2IiLCJjYW52YXMiLCJjdHgiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwidG9EYXRhVVJMIiwib25lcnJvciIsInVybCIsImNiIiwidGltZXNwYW4iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJmaW5kIiwicmVtb3ZlIiwiZXhwb3J0cyIsIm8iLCJjb3VudGVyIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidGhlcGFzdGUiLCJleHRlbmQiLCJzdXBwb3J0cyIsInZpZXciLCJ1cGxvYWRJbWFnZSIsImltYWdlIiwiZWRpdG9yIiwidXBsb2FkX3BsYWNlaG9sZGVyIiwiaWQiLCIkY29udGFpbmVyIiwid3JhcCIsInBhcmVudCIsIm5hdHVyYWxXaWR0aCIsIm5hdHVyYWxIZWlnaHQiLCJ4aHIiLCJ3b3JrZmxvdyIsInN1YiIsInN1YnN0ciIsInVwbG9hZCIsInN1ZmZpeCIsIm9wdGlvbnMiLCJtaW1lX3R5cGVzIiwiY29udmVydCIsInBvc3RuYW1lIiwidHJhY2UiLCJyZXBsYWNlIiwibDEwbiIsInBhc3RlZF9pbnRvIiwicGFzdGVkIiwiYWRkRmlsZSIsInVwbG9hZGVyIiwic3RhdGUiLCJyZXNldCIsIndwIiwibWVkaWEiLCJvcGVuIiwid3BBY3RpdmVFZGl0b3IiLCJmcmFtZSIsInRpdGxlIiwiY29weV9wYXN0ZSIsIm11bHRpcGxlIiwiY2xvc2UiLCJyZWFkeSIsImJpbmQiLCJlIiwidG90YWwiLCJwZXJjZW50IiwidXAiLCJhcmdzIiwiaW1nSFRNTCIsImF0dGFjaG1lbnQiLCJjaGFuZ2VkIiwicmVwbGFjZVdpdGgiLCJlYWNoIiwiWE1MSHR0cFJlcXVlc3QiLCJyZXNwb25zZVR5cGUiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwicmVzcG9uc2UiLCJzZW5kIiwiY2xpcGJvYXJkSGFzSW1hZ2UiLCJoYXNJbWFnZSIsImV4dCIsIm1PeGllIiwiVXBsb2FkZXIiLCJzdWNjZXNzIiwiZmlsZV9hdHRhY2htZW50IiwiXyIsIk1lZGlhRnJhbWUiLCJTZWxlY3QiLCJfcGFyZW50SW5pdGlhbGl6ZSIsImluaXRpYWxpemUiLCJhcHBseSIsImFyZ3VtZW50cyIsImJpbmRQYXN0ZUhhbmRsZXJzIiwiX3BhcmVudEJyb3dzZVJvdXRlciIsImJyb3dzZVJvdXRlciIsInNldCIsInBhc3RlYm9hcmQiLCJwcmlvcml0eSIsInByZXZpb3VzQ29udGVudCIsImRpc21pc3MiLCJjb250ZW50Q3JlYXRlUGFzdGVib2FyZCIsImNvbnRlbnRSZW5kZXJHcmFiYmVyIiwiY3VycmVudFBhc3RlVmlldyIsIkRhdGFTb3VyY2VJbWFnZUdyYWJiZXIiLCJjb250cm9sbGVyIiwiZ3JhYmJlciIsIlBhc3RlYm9hcmQiLCJsaXN0ZW5UbyIsInVwbG9hZGVkRGF0YUltYWdlIiwic3RhcnRHcmFiYmluZyIsInN0b3BMaXN0ZW5pbmciLCJvYmoiLCJicm93c2VDb250ZW50Iiwicm91dGVyIiwic2VsZWN0IiwiaW1hZ2VQYXN0ZWQiLCJBdHRhY2htZW50c0Jyb3dzZXIiLCJwYXN0ZUJ0biIsInNlbGYiLCJtb2RhbCIsIm1vZGUiLCJjdXJyZW50IiwiQnV0dG9uIiwiY2xhc3NOYW1lIiwiY2xpY2siLCJhY3RpdmUiLCJ0aGVwYXN0ZU9wZW4iLCJ3cHVwbG9hZGVyIiwidG9vbGJhciIsInJlbmRlciIsIk1vZGFsIiwidGhlcGFzdGVDbG9zZSIsInN0b3BHcmFiYmluZyIsIkRhdGFTb3VyY2VJbWFnZVVwbG9hZGVyIiwiVmlldyIsInRlbXBsYXRlIiwiJGRpc2NhcmRCdG4iLCIkdXBsb2FkQnRuIiwiZXZlbnRzIiwiY2xpY2sgW2RhdGEtYWN0aW9uPVwidXBsb2FkXCJdIiwiY2xpY2sgW2RhdGEtYWN0aW9uPVwiZGlzY2FyZFwiXSIsImRlZmF1bHRzIiwiZGVmYXVsdEZpbGVOYW1lIiwidGFnTmFtZSIsInVwbG9kZXIiLCJzZXRJbWFnZURhdGEiLCJjb250YWluZXIiLCIkaW1hZ2VDb250YWluZXIiLCJodG1sIiwiZm9ybWF0IiwiZGVmYXVsdEZpbGVGb3JtYXQiLCJkZXN0cm95Iiwib3B0cyIsImdldFVwbG9hZGVyIiwiZ2V0T3B0aW9uIiwic2NhbGUiLCJtYXgiLCJkb3duc2l6ZSIsImVtYmVkIiwibG9hZCIsImFwcGVuZCIsImRpc2NhcmRJbWFnZSIsInVuYmluZFVwbG9hZGVyRXZlbnRzIiwiZ2V0QXNCbG9iIiwianBlZ19xdWFsaXR5IiwiYmluZFVwbG9hZGVyRXZlbnRzIiwiZGV0YWNoIiwiZ2V0U291cmNlIiwic2hvdyIsIiRlbCIsImhpZGUiLCJfdXBsb2FkU3VjY2Vzc0hhbmRsZXIiLCJfdXBsb2FkRXJyb3JIYW5kbGVyIiwiZXJyIiwidW5iaW5kIiwiYWN0aW9uIiwiJHBhc3RlYm9hcmQiLCIkbWVzc2FnZSIsInNob3dfbWVzc2FnZSIsInN0YXJ0IiwicGFzdGVfZXJyb3Jfbm9faW1hZ2UiLCJwYXN0ZV9lcnJvciIsInN0b3AiLCJvZmYiLCJtc2ciLCJyZXQiLCJpbWFnZUNyZWF0ZWQiLCJpbWFnZURhdGEiLCJnZXRBY3Rpb24iXSwibWFwcGluZ3MiOiJDQVFBLFdBQ0EsR0FBQUEsR0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsQ0FFQUosR0FBQUssT0FBQUMsT0FFQU4sRUFBQU8sTUFBQSxTQUFBQyxHQUNBLEdBQUFDLEVBS0EsT0FKQSxtQkFBQUMsVUFBQSxPQUFBQSxTQUNBQSxRQUFBQyxJQUFBLDBGQUVBRixFQUFBUixFQUFBVyxrQkFBQUosR0FDQUMsRUFBQUksWUFHQWIsRUFBQWMsR0FBQUMscUJBQUEsV0FDQSxHQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxDQUVBLEtBREFBLEVBQUFDLEtBQ0FILEVBQUEsRUFBQUMsRUFBQUMsRUFBQUUsT0FBQUosRUFBQUMsRUFBQUQsSUFDQUQsRUFBQUcsRUFBQUYsR0FDQUQsRUFBQU0sV0FBQXRCLEVBQUFnQixHQUFBTyxHQUFBLDZDQUdBdEIsRUFBQVcsa0JBQUFJLEdBQ0FBLEVBQUFNLFdBQUEsRUFFQSxPQUFBRixPQUdBcEIsRUFBQWMsR0FBQVUsaUJBQUEsV0FDQSxHQUFBUixHQUFBQyxFQUFBQyxFQUFBQyxDQUVBLEtBREFBLEVBQUFDLEtBQ0FILEVBQUEsRUFBQUMsRUFBQUMsRUFBQUUsT0FBQUosRUFBQUMsRUFBQUQsSUFDQUQsRUFBQUcsRUFBQUYsR0FDQUQsRUFBQU0sV0FBQXRCLEVBQUFnQixHQUFBTyxHQUFBLGdDQUdBdEIsRUFBQXdCLGNBQUFULEdBQ0FBLEVBQUFNLFdBQUEsRUFFQSxPQUFBRixPQUdBcEIsRUFBQWMsR0FB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dGhlLXBhc3RlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG5cbi8qXG5wYXN0ZS5qcyBpcyBhbiBpbnRlcmZhY2UgdG8gcmVhZCBkYXRhICggdGV4dCAvIGltYWdlICkgZnJvbSBjbGlwYm9hcmQgaW4gZGlmZmVyZW50IGJyb3dzZXJzLiBJdCBhbHNvIGNvbnRhaW5zIHNldmVyYWwgaGFja3MuXG5cbmh0dHBzOi8vZ2l0aHViLmNvbS9sYXllcnNzc3MvcGFzdGUuanNcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciAkLCBQYXN0ZSwgY3JlYXRlSGlkZGVuRWRpdGFibGUsIGRhdGFVUkx0b0Jsb2IsIGlzRm9jdXNhYmxlO1xuXG4gICQgPSB3aW5kb3cualF1ZXJ5O1xuXG4gICQucGFzdGUgPSBmdW5jdGlvbihwYXN0ZUNvbnRhaW5lcikge1xuICAgIHZhciBwbTtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZSAhPT0gbnVsbCkge1xuICAgICAgY29uc29sZS5sb2coXCJERVBSRUNBVEVEOiBUaGlzIG1ldGhvZCBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICQuZm4ucGFzdGFibGVOb25JbnB1dGFibGUoKSBpbnN0ZWFkLlwiKTtcbiAgICB9XG4gICAgcG0gPSBQYXN0ZS5tb3VudE5vbklucHV0YWJsZShwYXN0ZUNvbnRhaW5lcik7XG4gICAgcmV0dXJuIHBtLl9jb250YWluZXI7XG4gIH07XG5cbiAgJC5mbi5wYXN0YWJsZU5vbklucHV0YWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBlbCwgaiwgbGVuLCByZWY7XG4gICAgcmVmID0gdGhpcztcbiAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgIGVsID0gcmVmW2pdO1xuICAgICAgaWYgKGVsLl9wYXN0YWJsZSB8fCAkKGVsKS5pcygndGV4dGFyZWEsIGlucHV0OnRleHQsIFtjb250ZW50ZWRpdGFibGVdJykpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBQYXN0ZS5tb3VudE5vbklucHV0YWJsZShlbCk7XG4gICAgICBlbC5fcGFzdGFibGUgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAkLmZuLnBhc3RhYmxlVGV4dGFyZWEgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWwsIGosIGxlbiwgcmVmO1xuICAgIHJlZiA9IHRoaXM7XG4gICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICBlbCA9IHJlZltqXTtcbiAgICAgIGlmIChlbC5fcGFzdGFibGUgfHwgJChlbCkuaXMoJzpub3QodGV4dGFyZWEsIGlucHV0OnRleHQpJykpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBQYXN0ZS5tb3VudFRleHRhcmVhKGVsKTtcbiAgICAgIGVsLl9wYXN0YWJsZSA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gICQuZm4ucGFzdGFibGVDb250ZW50ZWRpdGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWwsIGosIGxlbiwgcmVmO1xuICAgIHJlZiA9IHRoaXM7XG4gICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICBlbCA9IHJlZltqXTtcbiAgICAgIGlmIChlbC5fcGFzdGFibGUgfHwgJChlbCkuaXMoJzpub3QoW2NvbnRlbnRlZGl0YWJsZV0pJykpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBQYXN0ZS5tb3VudENvbnRlbnRlZGl0YWJsZShlbCk7XG4gICAgICBlbC5fcGFzdGFibGUgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBkYXRhVVJMdG9CbG9iID0gZnVuY3Rpb24oZGF0YVVSTCwgc2xpY2VTaXplKSB7XG4gICAgdmFyIGI2NERhdGEsIGJ5dGVBcnJheSwgYnl0ZUFycmF5cywgYnl0ZUNoYXJhY3RlcnMsIGJ5dGVOdW1iZXJzLCBjb250ZW50VHlwZSwgaSwgbSwgb2Zmc2V0LCByZWYsIHNsaWNlO1xuICAgIGlmIChzbGljZVNpemUgPT0gbnVsbCkge1xuICAgICAgc2xpY2VTaXplID0gNTEyO1xuICAgIH1cbiAgICBpZiAoIShtID0gZGF0YVVSTC5tYXRjaCgvXmRhdGFcXDooW15cXDtdKylcXDtiYXNlNjRcXCwoLispJC8pKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJlZiA9IG0sIG0gPSByZWZbMF0sIGNvbnRlbnRUeXBlID0gcmVmWzFdLCBiNjREYXRhID0gcmVmWzJdO1xuICAgIGJ5dGVDaGFyYWN0ZXJzID0gYXRvYihiNjREYXRhKTtcbiAgICBieXRlQXJyYXlzID0gW107XG4gICAgb2Zmc2V0ID0gMDtcbiAgICB3aGlsZSAob2Zmc2V0IDwgYnl0ZUNoYXJhY3RlcnMubGVuZ3RoKSB7XG4gICAgICBzbGljZSA9IGJ5dGVDaGFyYWN0ZXJzLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgc2xpY2VTaXplKTtcbiAgICAgIGJ5dGVOdW1iZXJzID0gbmV3IEFycmF5KHNsaWNlLmxlbmd0aCk7XG4gICAgICBpID0gMDtcbiAgICAgIHdoaWxlIChpIDwgc2xpY2UubGVuZ3RoKSB7XG4gICAgICAgIGJ5dGVOdW1iZXJzW2ldID0gc2xpY2UuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaSsrO1xuICAgICAgfVxuICAgICAgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYnl0ZU51bWJlcnMpO1xuICAgICAgYnl0ZUFycmF5cy5wdXNoKGJ5dGVBcnJheSk7XG4gICAgICBvZmZzZXQgKz0gc2xpY2VTaXplO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEJsb2IoYnl0ZUFycmF5cywge1xuICAgICAgdHlwZTogY29udGVudFR5cGVcbiAgICB9KTtcbiAgfTtcblxuICBjcmVhdGVIaWRkZW5FZGl0YWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKS5hdHRyKCdjb250ZW50ZWRpdGFibGUnLCB0cnVlKS5hdHRyKCdhcmlhLWhpZGRlbicsIHRydWUpLmF0dHIoJ3RhYmluZGV4JywgLTEpLmNzcyh7XG4gICAgICB3aWR0aDogMSxcbiAgICAgIGhlaWdodDogMSxcbiAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgbGVmdDogLTEwMCxcbiAgICAgIG92ZXJmbG93OiAnaGlkZGVuJ1xuICAgIH0pO1xuICB9O1xuXG4gIGlzRm9jdXNhYmxlID0gZnVuY3Rpb24oZWxlbWVudCwgaGFzVGFiaW5kZXgpIHtcbiAgICB2YXIgZmllbGRzZXQsIGZvY3VzYWJsZUlmVmlzaWJsZSwgaW1nLCBtYXAsIG1hcE5hbWUsIG5vZGVOYW1lO1xuICAgIG1hcCA9IHZvaWQgMDtcbiAgICBtYXBOYW1lID0gdm9pZCAwO1xuICAgIGltZyA9IHZvaWQgMDtcbiAgICBmb2N1c2FibGVJZlZpc2libGUgPSB2b2lkIDA7XG4gICAgZmllbGRzZXQgPSB2b2lkIDA7XG4gICAgbm9kZU5hbWUgPSBlbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKCdhcmVhJyA9PT0gbm9kZU5hbWUpIHtcbiAgICAgIG1hcCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgIG1hcE5hbWUgPSBtYXAubmFtZTtcbiAgICAgIGlmICghZWxlbWVudC5ocmVmIHx8ICFtYXBOYW1lIHx8IG1hcC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnbWFwJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpbWcgPSAkKCdpbWdbdXNlbWFwPVxcJyMnICsgbWFwTmFtZSArICdcXCddJyk7XG4gICAgICByZXR1cm4gaW1nLmxlbmd0aCA+IDAgJiYgaW1nLmlzKCc6dmlzaWJsZScpO1xuICAgIH1cbiAgICBpZiAoL14oaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QpJC8udGVzdChub2RlTmFtZSkpIHtcbiAgICAgIGZvY3VzYWJsZUlmVmlzaWJsZSA9ICFlbGVtZW50LmRpc2FibGVkO1xuICAgICAgaWYgKGZvY3VzYWJsZUlmVmlzaWJsZSkge1xuICAgICAgICBmaWVsZHNldCA9ICQoZWxlbWVudCkuY2xvc2VzdCgnZmllbGRzZXQnKVswXTtcbiAgICAgICAgaWYgKGZpZWxkc2V0KSB7XG4gICAgICAgICAgZm9jdXNhYmxlSWZWaXNpYmxlID0gIWZpZWxkc2V0LmRpc2FibGVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgnYScgPT09IG5vZGVOYW1lKSB7XG4gICAgICBmb2N1c2FibGVJZlZpc2libGUgPSBlbGVtZW50LmhyZWYgfHwgaGFzVGFiaW5kZXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvY3VzYWJsZUlmVmlzaWJsZSA9IGhhc1RhYmluZGV4O1xuICAgIH1cbiAgICBmb2N1c2FibGVJZlZpc2libGUgPSBmb2N1c2FibGVJZlZpc2libGUgfHwgJChlbGVtZW50KS5pcygnW2NvbnRlbnRlZGl0YWJsZV0nKTtcbiAgICByZXR1cm4gZm9jdXNhYmxlSWZWaXNpYmxlICYmICQoZWxlbWVudCkuaXMoJzp2aXNpYmxlJyk7XG4gIH07XG5cbiAgUGFzdGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgUGFzdGUucHJvdG90eXBlLl90YXJnZXQgPSBudWxsO1xuXG4gICAgUGFzdGUucHJvdG90eXBlLl9jb250YWluZXIgPSBudWxsO1xuXG4gICAgUGFzdGUubW91bnROb25JbnB1dGFibGUgPSBmdW5jdGlvbihub25JbnB1dGFibGUpIHtcbiAgICAgIHZhciBwYXN0ZTtcbiAgICAgIHBhc3RlID0gbmV3IFBhc3RlKGNyZWF0ZUhpZGRlbkVkaXRhYmxlKCkuYXBwZW5kVG8obm9uSW5wdXRhYmxlKSwgbm9uSW5wdXRhYmxlKTtcbiAgICAgICQobm9uSW5wdXRhYmxlKS5vbignY2xpY2snLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgaWYgKCFpc0ZvY3VzYWJsZShldi50YXJnZXQsIGZhbHNlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhc3RlLl9jb250YWluZXIuZm9jdXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgICBwYXN0ZS5fY29udGFpbmVyLm9uKCdmb2N1cycsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuICQobm9uSW5wdXRhYmxlKS5hZGRDbGFzcygncGFzdGFibGUtZm9jdXMnKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICAgIHJldHVybiBwYXN0ZS5fY29udGFpbmVyLm9uKCdibHVyJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gJChub25JbnB1dGFibGUpLnJlbW92ZUNsYXNzKCdwYXN0YWJsZS1mb2N1cycpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgIH07XG5cbiAgICBQYXN0ZS5tb3VudFRleHRhcmVhID0gZnVuY3Rpb24odGV4dGFyZWEpIHtcbiAgICAgIHZhciBjdGxEb3duLCBwYXN0ZSwgcmVmLCByZWYxO1xuICAgICAgaWYgKCh0eXBlb2YgRGF0YVRyYW5zZmVyICE9PSBcInVuZGVmaW5lZFwiICYmIERhdGFUcmFuc2ZlciAhPT0gbnVsbCA/IERhdGFUcmFuc2Zlci5wcm90b3R5cGUgOiB2b2lkIDApICYmICgocmVmID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcikgIT0gbnVsbCA/IChyZWYxID0gcmVmLmNhbGwoT2JqZWN0LCBEYXRhVHJhbnNmZXIucHJvdG90eXBlLCAnaXRlbXMnKSkgIT0gbnVsbCA/IHJlZjEuZ2V0IDogdm9pZCAwIDogdm9pZCAwKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb3VudENvbnRlbnRlZGl0YWJsZSh0ZXh0YXJlYSk7XG4gICAgICB9XG4gICAgICBwYXN0ZSA9IG5ldyBQYXN0ZShjcmVhdGVIaWRkZW5FZGl0YWJsZSgpLmluc2VydEJlZm9yZSh0ZXh0YXJlYSksIHRleHRhcmVhKTtcbiAgICAgIGN0bERvd24gPSBmYWxzZTtcbiAgICAgICQodGV4dGFyZWEpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIHZhciByZWYyO1xuICAgICAgICBpZiAoKHJlZjIgPSBldi5rZXlDb2RlKSA9PT0gMTcgfHwgcmVmMiA9PT0gMjI0KSB7XG4gICAgICAgICAgY3RsRG93biA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSk7XG4gICAgICAkKHRleHRhcmVhKS5vbigna2V5ZG93bicsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIHZhciByZWYyO1xuICAgICAgICBpZiAoKHJlZjIgPSBldi5rZXlDb2RlKSA9PT0gMTcgfHwgcmVmMiA9PT0gMjI0KSB7XG4gICAgICAgICAgY3RsRG93biA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChldi5jdHJsS2V5ICE9IG51bGwpICYmIChldi5tZXRhS2V5ICE9IG51bGwpKSB7XG4gICAgICAgICAgY3RsRG93biA9IGV2LmN0cmxLZXkgfHwgZXYubWV0YUtleTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3RsRG93biAmJiBldi5rZXlDb2RlID09PSA4Nikge1xuICAgICAgICAgIHBhc3RlLl90ZXh0YXJlYV9mb2N1c19zdG9sZW4gPSB0cnVlO1xuICAgICAgICAgIHBhc3RlLl9jb250YWluZXIuZm9jdXMoKTtcbiAgICAgICAgICBwYXN0ZS5fcGFzdGVfZXZlbnRfZmlyZWQgPSBmYWxzZTtcbiAgICAgICAgICBzZXRUaW1lb3V0KChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBpZiAoIXBhc3RlLl9wYXN0ZV9ldmVudF9maXJlZCkge1xuICAgICAgICAgICAgICAgICQodGV4dGFyZWEpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhc3RlLl90ZXh0YXJlYV9mb2N1c19zdG9sZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KSh0aGlzKSwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9KTtcbiAgICAgICQodGV4dGFyZWEpLm9uKCdwYXN0ZScsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7fTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICAgICQodGV4dGFyZWEpLm9uKCdmb2N1cycsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCFwYXN0ZS5fdGV4dGFyZWFfZm9jdXNfc3RvbGVuKSB7XG4gICAgICAgICAgICByZXR1cm4gJCh0ZXh0YXJlYSkuYWRkQ2xhc3MoJ3Bhc3RhYmxlLWZvY3VzJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgICAgJCh0ZXh0YXJlYSkub24oJ2JsdXInLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICghcGFzdGUuX3RleHRhcmVhX2ZvY3VzX3N0b2xlbikge1xuICAgICAgICAgICAgcmV0dXJuICQodGV4dGFyZWEpLnJlbW92ZUNsYXNzKCdwYXN0YWJsZS1mb2N1cycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICAgICQocGFzdGUuX3RhcmdldCkub24oJ19wYXN0ZUNoZWNrQ29udGFpbmVyRG9uZScsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJCh0ZXh0YXJlYSkuZm9jdXMoKTtcbiAgICAgICAgICByZXR1cm4gcGFzdGUuX3RleHRhcmVhX2ZvY3VzX3N0b2xlbiA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgICAgcmV0dXJuICQocGFzdGUuX3RhcmdldCkub24oJ3Bhc3RlVGV4dCcsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZXYsIGRhdGEpIHtcbiAgICAgICAgICB2YXIgY29udGVudCwgY3VyRW5kLCBjdXJTdGFydDtcbiAgICAgICAgICBjdXJTdGFydCA9ICQodGV4dGFyZWEpLnByb3AoJ3NlbGVjdGlvblN0YXJ0Jyk7XG4gICAgICAgICAgY3VyRW5kID0gJCh0ZXh0YXJlYSkucHJvcCgnc2VsZWN0aW9uRW5kJyk7XG4gICAgICAgICAgY29udGVudCA9ICQodGV4dGFyZWEpLnZhbCgpO1xuICAgICAgICAgICQodGV4dGFyZWEpLnZhbChcIlwiICsgY29udGVudC5zbGljZSgwLCBjdXJTdGFydCkgKyBkYXRhLnRleHQgKyBjb250ZW50LnNsaWNlKGN1ckVuZCkpO1xuICAgICAgICAgICQodGV4dGFyZWEpWzBdLnNldFNlbGVjdGlvblJhbmdlKGN1clN0YXJ0ICsgZGF0YS50ZXh0Lmxlbmd0aCwgY3VyU3RhcnQgKyBkYXRhLnRleHQubGVuZ3RoKTtcbiAgICAgICAgICByZXR1cm4gJCh0ZXh0YXJlYSkudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfTtcblxuICAgIFBhc3RlLm1vdW50Q29udGVudGVkaXRhYmxlID0gZnVuY3Rpb24oY29udGVudGVkaXRhYmxlKSB7XG4gICAgICB2YXIgcGFzdGU7XG4gICAgICBwYXN0ZSA9IG5ldyBQYXN0ZShjb250ZW50ZWRpdGFibGUsIGNvbnRlbnRlZGl0YWJsZSk7XG4gICAgICAkKGNvbnRlbnRlZGl0YWJsZSkub24oJ2ZvY3VzJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gJChjb250ZW50ZWRpdGFibGUpLmFkZENsYXNzKCdwYXN0YWJsZS1mb2N1cycpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgICAgcmV0dXJuICQoY29udGVudGVkaXRhYmxlKS5vbignYmx1cicsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuICQoY29udGVudGVkaXRhYmxlKS5yZW1vdmVDbGFzcygncGFzdGFibGUtZm9jdXMnKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gUGFzdGUoX2NvbnRhaW5lciwgX3RhcmdldCkge1xuICAgICAgdGhpcy5fY29udGFpbmVyID0gX2NvbnRhaW5lcjtcbiAgICAgIHRoaXMuX3RhcmdldCA9IF90YXJnZXQ7XG4gICAgICB0aGlzLl9jb250YWluZXIgPSAkKHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICB0aGlzLl90YXJnZXQgPSAkKHRoaXMuX3RhcmdldCkuYWRkQ2xhc3MoJ3Bhc3RhYmxlJyk7XG4gICAgICB0aGlzLl9jb250YWluZXIub24oJ3Bhc3RlJywgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihldikge1xuICAgICAgICAgIHZhciBjbGlwYm9hcmREYXRhLCBmaWxlLCBpdGVtLCBqLCBrLCBsZW4sIGxlbjEsIHJlYWRlciwgcmVmLCByZWYxLCByZWYyLCByZWYzLCB0ZXh0O1xuICAgICAgICAgIGlmIChldi5jdXJyZW50VGFyZ2V0ICE9PSBldi50YXJnZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfdGhpcy5fcGFzdGVfZXZlbnRfZmlyZWQgPSB0cnVlO1xuICAgICAgICAgIGlmICgoKHJlZiA9IGV2Lm9yaWdpbmFsRXZlbnQpICE9IG51bGwgPyByZWYuY2xpcGJvYXJkRGF0YSA6IHZvaWQgMCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgY2xpcGJvYXJkRGF0YSA9IGV2Lm9yaWdpbmFsRXZlbnQuY2xpcGJvYXJkRGF0YTtcbiAgICAgICAgICAgIGlmIChjbGlwYm9hcmREYXRhLml0ZW1zKSB7XG4gICAgICAgICAgICAgIHJlZjEgPSBjbGlwYm9hcmREYXRhLml0ZW1zO1xuICAgICAgICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYxLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgaXRlbSA9IHJlZjFbal07XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZS5tYXRjaCgvXmltYWdlXFwvLykpIHtcbiAgICAgICAgICAgICAgICAgIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9oYW5kbGVJbWFnZShldmVudC50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChpdGVtLmdldEFzRmlsZSgpKTtcbiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7fVxuICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAndGV4dC9wbGFpbicpIHtcbiAgICAgICAgICAgICAgICAgIGl0ZW0uZ2V0QXNTdHJpbmcoZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5fdGFyZ2V0LnRyaWdnZXIoJ3Bhc3RlVGV4dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICgtMSAhPT0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChjbGlwYm9hcmREYXRhLnR5cGVzLCAndGV4dC9wbGFpbicpKSB7XG4gICAgICAgICAgICAgICAgdGV4dCA9IGNsaXBib2FyZERhdGEuZ2V0RGF0YSgnVGV4dCcpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX3RhcmdldC50cmlnZ2VyKCdwYXN0ZVRleHQnLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHRleHRcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIDEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF90aGlzLl9jaGVja0ltYWdlc0luQ29udGFpbmVyKGZ1bmN0aW9uKHNyYykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5faGFuZGxlSW1hZ2Uoc3JjKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjbGlwYm9hcmREYXRhID0gd2luZG93LmNsaXBib2FyZERhdGEpIHtcbiAgICAgICAgICAgIGlmICgocmVmMiA9ICh0ZXh0ID0gY2xpcGJvYXJkRGF0YS5nZXREYXRhKCdUZXh0JykpKSAhPSBudWxsID8gcmVmMi5sZW5ndGggOiB2b2lkIDApIHtcbiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fdGFyZ2V0LnRyaWdnZXIoJ3Bhc3RlVGV4dCcsIHtcbiAgICAgICAgICAgICAgICAgIHRleHQ6IHRleHRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX3RhcmdldC50cmlnZ2VyKCdfcGFzdGVDaGVja0NvbnRhaW5lckRvbmUnKTtcbiAgICAgICAgICAgICAgfSwgMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZWYzID0gY2xpcGJvYXJkRGF0YS5maWxlcztcbiAgICAgICAgICAgICAgZm9yIChrID0gMCwgbGVuMSA9IHJlZjMubGVuZ3RoOyBrIDwgbGVuMTsgaysrKSB7XG4gICAgICAgICAgICAgICAgZmlsZSA9IHJlZjNba107XG4gICAgICAgICAgICAgICAgX3RoaXMuX2hhbmRsZUltYWdlKFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF90aGlzLl9jaGVja0ltYWdlc0luQ29udGFpbmVyKGZ1bmN0aW9uKHNyYykge30pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9XG5cbiAgICBQYXN0ZS5wcm90b3R5cGUuX2hhbmRsZUltYWdlID0gZnVuY3Rpb24oc3JjKSB7XG4gICAgICB2YXIgbG9hZGVyO1xuICAgICAgaWYgKHNyYy5tYXRjaCgvXndlYmtpdFxcLWZha2VcXC11cmxcXDpcXC9cXC8vKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFyZ2V0LnRyaWdnZXIoJ3Bhc3RlSW1hZ2VFcnJvcicsIHtcbiAgICAgICAgICBtZXNzYWdlOiBcIllvdSBhcmUgdHJ5aW5nIHRvIHBhc3RlIGFuIGltYWdlIGluIFNhZmFyaSwgaG93ZXZlciB3ZSBhcmUgdW5hYmxlIHRvIHJldGlldmUgaXRzIGRhdGEuXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLl90YXJnZXQudHJpZ2dlcigncGFzdGVJbWFnZVN0YXJ0Jyk7XG4gICAgICBsb2FkZXIgPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGxvYWRlci5jcm9zc09yaWdpbiA9IFwiYW5vbnltb3VzXCI7XG4gICAgICBsb2FkZXIub25sb2FkID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgYmxvYiwgY2FudmFzLCBjdHgsIGRhdGFVUkw7XG4gICAgICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgY2FudmFzLndpZHRoID0gbG9hZGVyLndpZHRoO1xuICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBsb2FkZXIuaGVpZ2h0O1xuICAgICAgICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgIGN0eC5kcmF3SW1hZ2UobG9hZGVyLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgIGRhdGFVUkwgPSBudWxsO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkYXRhVVJMID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7XG4gICAgICAgICAgICBibG9iID0gZGF0YVVSTHRvQmxvYihkYXRhVVJMKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge31cbiAgICAgICAgICBpZiAoZGF0YVVSTCkge1xuICAgICAgICAgICAgX3RoaXMuX3RhcmdldC50cmlnZ2VyKCdwYXN0ZUltYWdlJywge1xuICAgICAgICAgICAgICBibG9iOiBibG9iLFxuICAgICAgICAgICAgICBkYXRhVVJMOiBkYXRhVVJMLFxuICAgICAgICAgICAgICB3aWR0aDogbG9hZGVyLndpZHRoLFxuICAgICAgICAgICAgICBoZWlnaHQ6IGxvYWRlci5oZWlnaHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gX3RoaXMuX3RhcmdldC50cmlnZ2VyKCdwYXN0ZUltYWdlRW5kJyk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIGxvYWRlci5vbmVycm9yID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBfdGhpcy5fdGFyZ2V0LnRyaWdnZXIoJ3Bhc3RlSW1hZ2VFcnJvcicsIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGdldCBpbWFnZSBmcm9tOiBcIiArIHNyYyxcbiAgICAgICAgICAgIHVybDogc3JjXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLl90YXJnZXQudHJpZ2dlcigncGFzdGVJbWFnZUVuZCcpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICByZXR1cm4gbG9hZGVyLnNyYyA9IHNyYztcbiAgICB9O1xuXG4gICAgUGFzdGUucHJvdG90eXBlLl9jaGVja0ltYWdlc0luQ29udGFpbmVyID0gZnVuY3Rpb24oY2IpIHtcbiAgICAgIHZhciBpbWcsIGosIGxlbiwgcmVmLCB0aW1lc3BhbjtcbiAgICAgIHRpbWVzcGFuID0gTWF0aC5mbG9vcigxMDAwICogTWF0aC5yYW5kb20oKSk7XG4gICAgICByZWYgPSB0aGlzLl9jb250YWluZXIuZmluZCgnaW1nJyk7XG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgaW1nID0gcmVmW2pdO1xuICAgICAgICBpbWdbXCJfcGFzdGVfbWFya2VkX1wiICsgdGltZXNwYW5dID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGssIGxlbjEsIHJlZjE7XG4gICAgICAgICAgcmVmMSA9IF90aGlzLl9jb250YWluZXIuZmluZCgnaW1nJyk7XG4gICAgICAgICAgZm9yIChrID0gMCwgbGVuMSA9IHJlZjEubGVuZ3RoOyBrIDwgbGVuMTsgaysrKSB7XG4gICAgICAgICAgICBpbWcgPSByZWYxW2tdO1xuICAgICAgICAgICAgaWYgKCFpbWdbXCJfcGFzdGVfbWFya2VkX1wiICsgdGltZXNwYW5dKSB7XG4gICAgICAgICAgICAgIGNiKGltZy5zcmMpO1xuICAgICAgICAgICAgICAkKGltZykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBfdGhpcy5fdGFyZ2V0LnRyaWdnZXIoJ19wYXN0ZUNoZWNrQ29udGFpbmVyRG9uZScpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyksIDEpO1xuICAgIH07XG5cbiAgICByZXR1cm4gUGFzdGU7XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIihmdW5jdGlvbiggJCwgZXhwb3J0cywgbyApIHtcblxuXHR2YXIgaXNfY2hyb21lXHQ9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykgPiAtMSxcblx0XHRjb3VudGVyID0gMCxcblx0XHR3b3JrZmxvdztcblxuXHR0aGVwYXN0ZSA9IGV4cG9ydHMudGhlcGFzdGUgPSAkLmV4dGVuZCgge1xuXHRcdHN1cHBvcnRzIDoge1xuXHRcdFx0cGFzdGU6ICggKCdwYXN0ZScgaW4gZG9jdW1lbnQpIHx8ICgnb25wYXN0ZScgaW4gZG9jdW1lbnQpIHx8IHR5cGVvZih3aW5kb3cub25wYXN0ZSkgPT09ICdvYmplY3QnIHx8ICggJ29ucGFzdGUnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpICkgKSwgLy8gYnJvd3NlclxuXHRcdH0sXG5cdFx0dmlldzp7fSxcblxuXHRcdHVwbG9hZEltYWdlOiBmdW5jdGlvbiggaW1hZ2UsIGVkaXRvciwgdXBsb2FkX3BsYWNlaG9sZGVyICkge1xuXG5cdFx0XHR2YXIgaWQgPSAnX190aGVwYXN0ZV9ib3hfJysoY291bnRlcisrKSxcblx0XHRcdFx0JGNvbnRhaW5lciA9ICQoaW1hZ2UpXG5cdFx0XHRcdFx0LndyYXAoJzxkaXYgaWQ9XCInK2lkKydcIiBkYXRhLXByb2dyZXNzPVwiMFwiIGNsYXNzPVwidGhlcGFzdGUtaW1hZ2UtcGxhY2Vob2xkZXJcIiBjb250ZW50ZWRpdGFibGU9XCJmYWxzZVwiPjwvZGl2PicpXG5cdFx0XHRcdFx0LnBhcmVudCgpO1xuXG5cdFx0XHRcdC8vIHNldCAkY29udGFpbmVyIHNpemUgb25jZSBrbm93blxuXHRcdFx0XHRpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkKCBlZGl0b3IuJCgnIycraWQpICkud2lkdGgoIHRoaXMubmF0dXJhbFdpZHRoICk7XG5cdFx0XHRcdFx0JCggZWRpdG9yLiQoJyMnK2lkKSApLmhlaWdodCggdGhpcy5uYXR1cmFsSGVpZ2h0ICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0dmFyIHhocixcblx0XHRcdFx0d29ya2Zsb3csXG5cdFx0XHRcdHNyYyA9IGltYWdlLnNyYyxcblx0XHRcdFx0c3ViID0gc3JjLnN1YnN0cigwLDUpLFxuXHRcdFx0XHR1cGxvYWQgPSBmdW5jdGlvbiggZGF0YVVSTCApe1xuXHRcdFx0XHRcdHZhciB0eXBlID0gZGF0YVVSTC5tYXRjaCgvXmRhdGFcXDooW15cXDtdKylcXDsvKVsxXSxcblx0XHRcdFx0XHRcdGZpbGUgPSBuZXcgby5CbG9iKCBudWxsLCB7IGRhdGE6IGRhdGFVUkwgfSApLFxuXHRcdFx0XHRcdFx0c3VmZml4ID0gdGhlcGFzdGUub3B0aW9ucy5taW1lX3R5cGVzLmNvbnZlcnRbIHR5cGUgXSxcblx0XHRcdFx0XHRcdHBvc3RuYW1lID0gJCgnI3Bvc3QgW25hbWU9XCJwb3N0X3RpdGxlXCJdI3RpdGxlJykudmFsKCk7XG5cdFx0XHRcdFx0aWYgKCAndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHN1ZmZpeCApIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUudHJhY2UoICdXb25cXCd0IHVwbG9hZCwgYmFkIG1pbWUgdHlwZTogJyArIHR5cGUgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2YgcG9zdG5hbWUgKSB7XG5cdFx0XHRcdFx0XHRwb3N0bmFtZSA9IHBvc3RuYW1lLnJlcGxhY2UoLyhbXFxeXFwhXFw/PD46XCInXFwvXFx8XFwqwqddKS9nLCcnKS5yZXBsYWNlKC8gKy9nLCcgJyk7XG5cdFx0XHRcdFx0XHRmaWxlLm5hbWUgPSB0aGVwYXN0ZS5sMTBuLnBhc3RlZF9pbnRvICsgJyAnICsgcG9zdG5hbWUgKyAnLicgKyBzdWZmaXg7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGZpbGUubmFtZSA9IHRoZXBhc3RlLmwxMG4ucGFzdGVkICsgJy4nICsgc3VmZml4O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRmaWxlLnR5cGUgPSB0eXBlO1xuXG5cdFx0XHRcdFx0dmFyIGFkZEZpbGUgPSBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0d29ya2Zsb3cudXBsb2FkZXIudXBsb2FkZXIudXBsb2FkZXIuYWRkRmlsZSggZmlsZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoICEgd29ya2Zsb3cgKSB7XG5cdFx0XHRcdFx0XHR3b3JrZmxvdyA9IHdwLm1lZGlhLmVkaXRvci5vcGVuKCB3aW5kb3cud3BBY3RpdmVFZGl0b3IsIHtcblx0XHRcdFx0XHRcdFx0ZnJhbWU6XHRcdCdwb3N0Jyxcblx0XHRcdFx0XHRcdFx0c3RhdGU6XHRcdCdpbnNlcnQnLFxuXHRcdFx0XHRcdFx0XHR0aXRsZTpcdFx0dGhlcGFzdGUubDEwbi5jb3B5X3Bhc3RlLFxuXHRcdFx0XHRcdFx0XHRtdWx0aXBsZTpcdGZhbHNlXG5cdFx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0XHRcdHdvcmtmbG93LmNsb3NlKCk7XG5cblx0XHRcdFx0XHRcdGlmICggd29ya2Zsb3cudXBsb2FkZXIudXBsb2FkZXIgJiYgd29ya2Zsb3cudXBsb2FkZXIudXBsb2FkZXIucmVhZHkgKSB7XG5cdFx0XHRcdFx0XHRcdGFkZEZpbGUoKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHdvcmtmbG93Lm9uKCAndXBsb2FkZXI6cmVhZHknLCBhZGRGaWxlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHdvcmtmbG93LnN0YXRlKCkucmVzZXQoKTtcblx0XHRcdFx0XHRcdGFkZEZpbGUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0d29ya2Zsb3cudXBsb2FkZXIudXBsb2FkZXIudXBsb2FkZXIuYmluZCgnVXBsb2FkUHJvZ3Jlc3MnLGZ1bmN0aW9uKCBlICl7XG5cdFx0XHRcdFx0XHRlZGl0b3IuJCgnIycraWQpLmF0dHIoJ2RhdGEtcHJvZ3Jlc3MnLGUudG90YWwucGVyY2VudCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0d29ya2Zsb3cudXBsb2FkZXIudXBsb2FkZXIudXBsb2FkZXIuYmluZCgnRmlsZVVwbG9hZGVkJyxmdW5jdGlvbiggdXAsIGFyZ3MgKXtcblxuXHRcdFx0XHRcdFx0dmFyICRjb250YWluZXIgPSBlZGl0b3IuJCgnIycraWQpLFxuXHRcdFx0XHRcdFx0XHRpbWdIVE1MID0gJzxpbWcgY2xhc3M9XCJhbGlnbm5vbmUgd3AtaW1hZ2UtJythcmdzLmF0dGFjaG1lbnQuaWQrJyBzaXplLWZ1bGxcIiBzcmM9XCInK2FyZ3MuYXR0YWNobWVudC5jaGFuZ2VkLnVybCsnXCIgLz4nO1xuXG5cdFx0XHRcdFx0XHQvLyByZXBsYWNlIGltYWdlXG5cdFx0XHRcdFx0XHQkY29udGFpbmVyLnJlcGxhY2VXaXRoKCBpbWdIVE1MICk7XG5cblx0XHRcdFx0XHRcdC8vIHJlcGxhY2Ugb3RoZXIgaW5zdGFuY2VzXG5cdFx0XHRcdFx0XHRlZGl0b3IuJCgnaW1nW3NyYz1cIicrc3JjKydcIl0nKS5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRcdCQodGhpcykucmVwbGFjZVdpdGgoIGltZ0hUTUwgKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHdvcmtmbG93LnVwbG9hZGVyLnVwbG9hZGVyLnVwbG9hZGVyLmJpbmQoJ0Vycm9yJyxmdW5jdGlvbiggdXAsIGFyZ3MgKXtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHVwLGFyZ3MpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRpZiAoIHN1YiA9PT0gJ2Jsb2I6JyApIHtcblxuXHRcdFx0XHR4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XHRcdFx0eGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJztcblx0XHRcdFx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0dmFyIHJlYWRlcjtcblx0XHRcdFx0XHRpZiAoIHhoci5yZWFkeVN0YXRlID09IDQgKSB7XG5cdFx0XHRcdFx0XHRyZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXHRcdFx0XHRcdFx0cmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHR1cGxvYWQoIHJlYWRlci5yZXN1bHQgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJlYWRlci5yZWFkQXNEYXRhVVJMKCBuZXcgQmxvYiggWyB4aHIucmVzcG9uc2UgXSwgeyB0eXBlOiAnaW1hZ2UvcG5nJyB9ICkgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0eGhyLm9wZW4oICdHRVQnLCBzcmMgKTtcblx0XHRcdFx0eGhyLnNlbmQoIG51bGwgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggc3ViID09PSAnZGF0YTonICkge1xuXHRcdFx0XHR1cGxvYWQoIHNyYyApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuICRjb250YWluZXI7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqXHRAcmV0dXJuOiBudWxsfHRydWV8ZmFsc2Vcblx0XHQgKi9cblx0XHRjbGlwYm9hcmRIYXNJbWFnZTpmdW5jdGlvbiggY2xpcGJvYXJkRGF0YSApIHtcblx0XHRcdHZhciBoYXNJbWFnZSA9IGZhbHNlO1xuXHRcdFx0aWYgKCBjbGlwYm9hcmREYXRhLml0ZW1zICkge1xuXHRcdFx0XHQkLmVhY2goIGNsaXBib2FyZERhdGEuaXRlbXMsIGZ1bmN0aW9uKGksaXRlbSl7XG5cdFx0XHRcdFx0aWYgKCBpdGVtLnR5cGUgaW4gdGhlcGFzdGUub3B0aW9ucy5taW1lX3R5cGVzLnBhc3RlICkge1xuXHRcdFx0XHRcdFx0aGFzSW1hZ2UgPSB0cnVlO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdFx0XHRyZXR1cm4gaGFzSW1hZ2U7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggY2xpcGJvYXJkRGF0YS50eXBlcyApIHtcblx0XHRcdFx0JC5lYWNoKCB0aGVwYXN0ZS5vcHRpb25zLm1pbWVfdHlwZXMucGFzdGUsIGZ1bmN0aW9uKHR5cGUsZXh0KXtcblx0XHRcdFx0XHRpZiAoIGNsaXBib2FyZERhdGEudHlwZXMuaW5kZXhPZih0eXBlKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0aGFzSW1hZ2UgPSB0cnVlO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdFx0XHRyZXR1cm4gaGFzSW1hZ2U7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblxuXHR9LCB0aGVwYXN0ZSApO1xuXG59KSggalF1ZXJ5LCB3cC5tZWRpYSwgbU94aWUgKTtcbiIsIihmdW5jdGlvbigkLGV4cG9ydHMpe1xuXG5cdHZhciBjb3VudGVyICAgICAgPSAwLFxuXHRcdGwxMG4gPSB3cC5tZWRpYS50aGVwYXN0ZS5sMTBuO1xuXG5cdCQuZXh0ZW5kKCB3cC5VcGxvYWRlci5wcm90b3R5cGUsIHtcblx0XHRzdWNjZXNzIDogZnVuY3Rpb24oIGZpbGVfYXR0YWNobWVudCApe1xuXHRcdH1cblx0fSk7XG5cblxuXHQvKipcblx0ICpcdEludGVncmF0ZSBpbnRvIG1lZGlhIGxpYnJhcnkgbW9kYWxcblx0ICovXG5cdC8vIGFkZCBzdGF0ZXMgdG8gYnJvd3NlIHJvdXRlclxuXHRfLmV4dGVuZCggd3AubWVkaWEudmlldy5NZWRpYUZyYW1lLlNlbGVjdC5wcm90b3R5cGUsIHtcblx0XHRfcGFyZW50SW5pdGlhbGl6ZTogd3AubWVkaWEudmlldy5NZWRpYUZyYW1lLlNlbGVjdC5wcm90b3R5cGUuaW5pdGlhbGl6ZSxcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuX3BhcmVudEluaXRpYWxpemUuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0dGhpcy5iaW5kUGFzdGVIYW5kbGVycygpO1xuXHRcdH0sXG5cdFx0X3BhcmVudEJyb3dzZVJvdXRlcjogd3AubWVkaWEudmlldy5NZWRpYUZyYW1lLlNlbGVjdC5wcm90b3R5cGUuYnJvd3NlUm91dGVyLFxuXHRcdGJyb3dzZVJvdXRlciA6IGZ1bmN0aW9uKCB2aWV3ICkge1xuXHRcdFx0dGhpcy5fcGFyZW50QnJvd3NlUm91dGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblxuXHRcdFx0aWYgKCB3cC5tZWRpYS50aGVwYXN0ZS5zdXBwb3J0cy5wYXN0ZSApIHtcblx0XHRcdFx0dmlldy5zZXQoe3Bhc3RlYm9hcmQ6e1xuXHRcdFx0XHRcdHRleHQ6ICAgICBsMTBuLmNvcHlfcGFzdGUsXG5cdFx0XHRcdFx0cHJpb3JpdHk6IDM1XG5cdFx0XHRcdH19KTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0YmluZFBhc3RlSGFuZGxlcnM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHByZXZpb3VzQ29udGVudCA9IGZhbHNlO1xuXG5cdFx0XHQvLyBkaXNtaXNzIGNvbnRlbnQgb24gY2xvc2Vcblx0XHRcdHRoaXMub24oICdjb250ZW50OnJlbmRlciBjbG9zZScgLCBmdW5jdGlvbihjb250ZW50KXtcblx0XHRcdFx0aWYgKCBwcmV2aW91c0NvbnRlbnQgJiYgJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHByZXZpb3VzQ29udGVudC5kaXNtaXNzICkge1xuXHRcdFx0XHRcdHByZXZpb3VzQ29udGVudC5kaXNtaXNzKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGNvbnRlbnQgKVxuXHRcdFx0XHRcdHByZXZpb3VzQ29udGVudCA9IGNvbnRlbnQ7XG5cdFx0XHR9ICwgdGhpcyApO1xuXG5cdFx0XHR0aGlzLm9uKCAnY29udGVudDpjcmVhdGU6cGFzdGVib2FyZCcsIHRoaXMuY29udGVudENyZWF0ZVBhc3RlYm9hcmQsIHRoaXMgKTtcblx0XHRcdHRoaXMub24oICdjb250ZW50OnJlbmRlcjpwYXN0ZWJvYXJkJywgdGhpcy5jb250ZW50UmVuZGVyR3JhYmJlciwgdGhpcyApO1xuXHRcdFx0dGhpcy5vbiggJ2NvbnRlbnQ6Y3JlYXRlOmRhdGFpbWFnZScsIHRoaXMuY29udGVudFJlbmRlckdyYWJiZXIsIHRoaXMgKTtcblxuXHRcdFx0ZnJhbWUgPSB0aGlzO1xuXHRcdH0sXG5cdFx0Ly8gYWRkIGhhbmRsZXJzXG5cdFx0Y29udGVudENyZWF0ZVBhc3RlYm9hcmQ6IGZ1bmN0aW9uKCBjb250ZW50ICkge1xuXHRcdFx0dmFyIHN0YXRlID0gdGhpcy5zdGF0ZSgpO1xuXG5cdFx0XHR0aGlzLmN1cnJlbnRQYXN0ZVZpZXcgPSBjb250ZW50LnZpZXcgPSBuZXcgd3AubWVkaWEudGhlcGFzdGUudmlldy5EYXRhU291cmNlSW1hZ2VHcmFiYmVyKCB7XG5cdFx0XHRcdGNvbnRyb2xsZXJcdDogdGhpcyxcblx0XHRcdFx0Z3JhYmJlclx0XHQ6IHdwLm1lZGlhLnRoZXBhc3RlLnZpZXcuUGFzdGVib2FyZFxuXHRcdFx0fSk7XG5cdFx0XHR0aGlzLmxpc3RlblRvKCB0aGlzLmN1cnJlbnRQYXN0ZVZpZXcudXBsb2FkZXIsICdhY3Rpb246dXBsb2FkZWQ6ZGF0YWltYWdlJywgdGhpcy51cGxvYWRlZERhdGFJbWFnZSApO1xuXHRcdH0sXG5cdFx0Y29udGVudFJlbmRlckdyYWJiZXI6IGZ1bmN0aW9uKCBjb250ZW50ICkge1xuXHRcdFx0Y29udGVudC5zdGFydEdyYWJiaW5nKCk7XG5cdFx0fSxcblx0XHR1cGxvYWRlZERhdGFJbWFnZTogZnVuY3Rpb24oIGNvbnRlbnQgKSB7XG5cdFx0XHR0aGlzLnN0b3BMaXN0ZW5pbmcoIHRoaXMuY3VycmVudFBhc3RlVmlldy51cGxvYWRlciwgJ2FjdGlvbjp1cGxvYWRlZDpkYXRhaW1hZ2UnICk7XG5cdFx0XHR2YXIgb2JqID0geyB2aWV3OiBudWxsIH07XG5cdFx0XHR0aGlzLmJyb3dzZUNvbnRlbnQob2JqKTtcblx0XHRcdHRoaXMuY29udGVudC5zZXQoIG9iai52aWV3ICk7XG5cdFx0XHR0aGlzLnJvdXRlci5nZXQoKS5zZWxlY3QoJ2Jyb3dzZScpXG5cdFx0fSxcblx0XHRpbWFnZVBhc3RlZDpmdW5jdGlvbigpe1xuXHRcdFx0Ly8gZW5hYmxlIGluc2VydCBidG5cblx0XHRcdC8vIGNsZWFyIHNlbGVjdGlvblxuXHRcdFx0Y29uc29sZS5sb2codGhpcylcblxuXHRcdH1cblx0fSk7XG5cblxuXG5cdC8qKlxuXHQgKlx0QWRkIHBhc3RlIGJ1dHRvbiB0byB0b29sYmFyIG9uIHVwbG9hZC5waHBcblx0ICovXG5cdF8uZXh0ZW5kKCB3cC5tZWRpYS52aWV3LkF0dGFjaG1lbnRzQnJvd3Nlci5wcm90b3R5cGUsIHtcblx0XHRfcGFyZW50SW5pdGlhbGl6ZTpcdHdwLm1lZGlhLnZpZXcuQXR0YWNobWVudHNCcm93c2VyLnByb3RvdHlwZS5pbml0aWFsaXplLFxuXHRcdGluaXRpYWxpemU6XHRmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0cGFzdGVCdG47XG5cblx0XHRcdHRoaXMuX3BhcmVudEluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO1xuXG5cdFx0XHR0aGlzLnRoZXBhc3RlID0ge1xuXHRcdFx0XHRwYXN0ZVx0OiB7XG4vL1x0XHRcdFx0XHRidXR0b25cdDogZmFsc2UsXG5cdFx0XHRcdFx0Z3JhYmJlclx0OiBmYWxzZSxcblx0XHRcdFx0XHRtb2RhbFx0OiBmYWxzZSxcblx0XHRcdFx0XHRtb2RlXHQ6ICdwYXN0ZScsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGN1cnJlbnRcdFx0OiBmYWxzZVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoICEgKCB0aGlzLmNvbnRyb2xsZXIgaW5zdGFuY2VvZiB3cC5tZWRpYS52aWV3Lk1lZGlhRnJhbWUuU2VsZWN0ICkgKSB7XG5cblx0XHRcdFx0aWYgKCB3cC5tZWRpYS50aGVwYXN0ZS5zdXBwb3J0cy5wYXN0ZSApIHtcblxuXHRcdFx0XHRcdHBhc3RlQnRuID0gbmV3IHdwLm1lZGlhLnZpZXcuQnV0dG9uKCB7XG5cdFx0XHRcdFx0XHR0ZXh0XHRcdDogbDEwbi5jb3B5X3Bhc3RlLFxuXHRcdFx0XHRcdFx0Y2xhc3NOYW1lOiAgJ2dyYWJiZXItYnV0dG9uJyxcblx0XHRcdFx0XHRcdHByaW9yaXR5XHQ6IC02NCxcblx0XHRcdFx0XHRcdGNsaWNrOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi50aGVwYXN0ZS5hY3RpdmUgPSBzZWxmLnRoZXBhc3RlLnBhc3RlO1xuXHRcdFx0XHRcdFx0XHRzZWxmLnRoZXBhc3RlT3BlbiggbDEwbi5jb3B5X3Bhc3RlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdHRoaXMudGhlcGFzdGUucGFzdGUuZ3JhYmJlciA9IG5ldyB3cC5tZWRpYS50aGVwYXN0ZS52aWV3LkRhdGFTb3VyY2VJbWFnZUdyYWJiZXIoIHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJcdDogdGhpcy5jb250cm9sbGVyLFxuXHRcdFx0XHRcdFx0Z3JhYmJlclx0XHQ6IHdwLm1lZGlhLnRoZXBhc3RlLnZpZXcuUGFzdGVib2FyZCxcblx0XHRcdFx0XHRcdHdwdXBsb2FkZXJcdDogdGhpcy5jb250cm9sbGVyLnVwbG9hZGVyLnVwbG9hZGVyLnVwbG9hZGVyXG5cdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdFx0dGhpcy50b29sYmFyLnNldCggJ3Bhc3RlTW9kZUJ1dHRvbicsIHBhc3RlQnRuLnJlbmRlcigpICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdHRoZXBhc3RlT3BlbjogZnVuY3Rpb24oIHRpdGxlICkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHR0aGlzLnRoZXBhc3RlLm1vZGFsICA9ICBuZXcgd3AubWVkaWEudmlldy5Nb2RhbCgge1xuXHRcdFx0XHRjb250cm9sbGVyIDogdGhpcyxcblx0XHRcdFx0dGl0bGUgICAgICA6IHRpdGxlXG5cdFx0XHR9ICk7XG5cdFx0XHR0aGlzLnRoZXBhc3RlLm1vZGFsLmNvbnRlbnQoIHRoaXMudGhlcGFzdGUuYWN0aXZlLmdyYWJiZXIgKTtcblx0XHRcdHRoaXMudGhlcGFzdGUubW9kYWwub3BlbigpO1xuXG5cdFx0XHR0aGlzLnRoZXBhc3RlLm1vZGFsLm9uKCAnY2xvc2UnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi50aGVwYXN0ZUNsb3NlKCk7XG5cdFx0XHRcdHNlbGYudGhlcGFzdGUuYWN0aXZlLmdyYWJiZXIuc3RvcEdyYWJiaW5nKCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy50aGVwYXN0ZS5hY3RpdmUuZ3JhYmJlci5zdGFydEdyYWJiaW5nKCk7XG5cblx0XHRcdHRoaXMubGlzdGVuVG8oIHRoaXMudGhlcGFzdGUuYWN0aXZlLmdyYWJiZXIudXBsb2FkZXIsICdhY3Rpb246dXBsb2FkOmRhdGFpbWFnZScsIHRoaXMudGhlcGFzdGVDbG9zZSApO1xuXHRcdH0sXG5cdFx0dGhlcGFzdGVDbG9zZTogZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLnRoZXBhc3RlLm1vZGFsLmNsb3NlKCk7XG5cblx0XHRcdHRoaXMuc3RvcExpc3RlbmluZyggdGhpcy50aGVwYXN0ZS5hY3RpdmUuZ3JhYmJlci51cGxvYWRlciwgJ2FjdGlvbjp1cGxvYWQ6ZGF0YWltYWdlJyApO1xuXHRcdH1cblx0fSk7XG5cbn0pKGpRdWVyeSx3aW5kb3cpO1xuIiwiKGZ1bmN0aW9uKCQsd2luZG93LG8pe1xuXHR2YXIgdGhlcGFzdGUgPSB3cC5tZWRpYS50aGVwYXN0ZSxcblx0XHRCdXR0b24gPSB3cC5tZWRpYS52aWV3LkJ1dHRvbixcblx0XHRNb2RhbCAgPSB3cC5tZWRpYS52aWV3Lk1vZGFsLFxuXHRcdGwxMG4gICA9IHRoZXBhc3RlLmwxMG47XG5cblxuXHR3cC5tZWRpYS50aGVwYXN0ZS52aWV3LkRhdGFTb3VyY2VJbWFnZVVwbG9hZGVyID0gd3AubWVkaWEuVmlldy5leHRlbmQoe1xuXHRcdHRlbXBsYXRlOiB3cC50ZW1wbGF0ZSgndGhlcGFzdGUtdXBsb2FkZXInKSxcblx0XHRjbGFzc05hbWU6ICd0aGVwYXN0ZS11cGxvYWRlcicsXG5cdFx0Y29udHJvbGxlcjpudWxsLFxuXHRcdGltYWdlIDogbnVsbCxcblx0XHQkZGlzY2FyZEJ0biA6IG51bGwsXG5cdFx0JHVwbG9hZEJ0biA6IG51bGwsXG5cblx0XHR1cGxvYWRlciA6IG51bGwsXG5cblx0XHRldmVudHMgOiB7XG5cdFx0XHQnY2xpY2sgW2RhdGEtYWN0aW9uPVwidXBsb2FkXCJdJ1x0OiAndXBsb2FkSW1hZ2UnLFxuXHRcdFx0J2NsaWNrIFtkYXRhLWFjdGlvbj1cImRpc2NhcmRcIl0nXHQ6ICdkaXNjYXJkSW1hZ2UnLFxuXHRcdH0sXG5cdFx0aW5pdGlhbGl6ZSA6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR3cC5tZWRpYS5WaWV3LnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuXHRcdFx0Xy5kZWZhdWx0cyggdGhpcy5vcHRpb25zLCB7XG5cdFx0XHRcdGRlZmF1bHRGaWxlTmFtZSA6IGwxMG4uaW1hZ2Vcblx0XHRcdH0pO1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0XHRpbnN0ciA9IG5ldyB3cC5tZWRpYS5WaWV3KHtcblx0XHRcdFx0dGFnTmFtZSAgICA6ICdkaXYnLFxuXHRcdFx0XHRjbGFzc05hbWUgIDogJ2luc3RydW1lbnRzJyxcblx0XHRcdFx0Y29udHJvbGxlciA6IHRoaXMuY29udHJvbGxlclxuXHRcdFx0fSk7XG5cblx0XHRcdHRoaXMudXBsb2FkZXIgPSB0aGlzLm9wdGlvbnMudXBsb2Rlcjtcblx0XHR9LFxuXHRcdHNldEltYWdlRGF0YSA6IGZ1bmN0aW9uKCBkYXRhICkge1xuXHRcdFx0dmFyIGNvbnRhaW5lciA9IHRoaXMuJGltYWdlQ29udGFpbmVyLmh0bWwoJycpLmdldCgwKSxcblx0XHRcdFx0c2VsZiA9IHRoaXMsXG5cdFx0XHRcdGZvcm1hdCA9IGRhdGEubWF0Y2goL2RhdGE6KGltYWdlXFwvKFxcdyspKTsvKVsxXTtcblxuXHRcdFx0aWYgKCAhIHRoZXBhc3RlLm9wdGlvbnMubWltZV90eXBlcy5jb252ZXJ0W2Zvcm1hdF0gKSB7XG5cdFx0XHRcdGZvcm1hdCA9IHRoaXMub3B0aW9ucy5kZWZhdWx0RmlsZUZvcm1hdDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCB0aGlzLmltYWdlICkge1xuXHRcdFx0XHR0aGlzLmltYWdlLmRlc3Ryb3koKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5pbWFnZSA9IG5ldyBvLkltYWdlKCk7XG5cdFx0XHR0aGlzLmltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgb3B0cyA9IHNlbGYuZ2V0VXBsb2FkZXIoKS5nZXRPcHRpb24oJ3Jlc2l6ZScpLFxuXHRcdFx0XHRcdHNjYWxlID0gTWF0aC5tYXgoIG9wdHMud2lkdGggLyB0aGlzLndpZHRoLCBvcHRzLmhlaWdodCAvIHRoaXMuaGVpZ2h0ICk7XG5cblx0XHRcdFx0ISFvcHRzICYmIChzY2FsZSA8IDEpICYmIHRoaXMuZG93bnNpemUoIHRoaXMud2lkdGgqc2NhbGUsIHRoaXMuaGVpZ2h0KnNjYWxlICk7XG5cblx0XHRcdFx0dGhpcy5lbWJlZCggY29udGFpbmVyICk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuaW1hZ2UubG9hZCggZGF0YSApO1xuXHRcdFx0aWYgKCB0aGlzLiRpbWFnZUNvbnRhaW5lciApIHtcblx0XHRcdFx0dGhpcy4kaW1hZ2VDb250YWluZXIuYXBwZW5kKHRoaXMuaW1hZ2UpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy4kKCdbZGF0YS1zZXR0aW5nPVwiZm9ybWF0XCJdIGlucHV0W3ZhbHVlPVwiJytmb3JtYXQrJ1wiXScpLnByb3AoICdjaGVja2VkJywgdHJ1ZSApO1xuXG5cblx0XHRcdHRoaXMuZGlzYWJsZWQoZmFsc2UpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRyZW5kZXIgOiBmdW5jdGlvbigpIHtcblx0XHRcdHdwLm1lZGlhLlZpZXcucHJvdG90eXBlLnJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7XG5cdFx0XHR0aGlzLiRpbWFnZUNvbnRhaW5lciA9IHRoaXMuJCgnLmltYWdlLWNvbnRhaW5lcicpO1xuXHRcdFx0dGhpcy4kZGlzY2FyZEJ0biA9IHRoaXMuJCgnW2RhdGEtYWN0aW9uPVwiZGlzY2FyZFwiXScpO1xuXHRcdFx0dGhpcy4kdXBsb2FkQnRuID0gdGhpcy4kKCdbZGF0YS1hY3Rpb249XCJ1cGxvYWRcIl0nKTtcblx0XHRcdHRoaXMuJCgnW2RhdGEtc2V0dGluZz1cInRpdGxlXCJdJykudmFsKCB0aGlzLm9wdGlvbnMuZGVmYXVsdEZpbGVOYW1lICk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdGRpc2NhcmRJbWFnZSA6IGZ1bmN0aW9uKCl7XG5cdFx0XHR0aGlzLnRyaWdnZXIoICdhY3Rpb246ZGlzY2FyZDpkYXRhaW1hZ2UnICwgdGhpcyApO1xuXHRcdFx0dGhpcy51bmJpbmRVcGxvYWRlckV2ZW50cygpO1xuXHRcdH0sXG5cdFx0dXBsb2FkSW1hZ2UgOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHR5cGUgPSB0aGlzLiQoJ1tkYXRhLXNldHRpbmc9XCJmb3JtYXRcIl0gOmNoZWNrZWQnKS52YWwoKSxcblx0XHRcdFx0c3VmZml4ID0gdGhlcGFzdGUub3B0aW9ucy5taW1lX3R5cGVzLmNvbnZlcnRbIHR5cGUgXSxcblx0XHRcdFx0bmFtZSA9IHRoaXMuJCgnaW5wdXRbZGF0YS1zZXR0aW5nPVwidGl0bGVcIl0nKS52YWwoKSArICcuJyArIHN1ZmZpeCxcblx0XHRcdFx0YmxvYiA9IHRoaXMuaW1hZ2UuZ2V0QXNCbG9iKCB0eXBlLCB0aGVwYXN0ZS5vcHRpb25zLmpwZWdfcXVhbGl0eSApO1xuXG5cdFx0XHR0aGlzLmJpbmRVcGxvYWRlckV2ZW50cygpO1xuXG5cdFx0XHRibG9iLmRldGFjaCggYmxvYi5nZXRTb3VyY2UoKSApO1xuXHRcdFx0YmxvYi5uYW1lID0gbmFtZTtcblx0XHRcdGJsb2IudHlwZSA9IHR5cGU7XG5cdFx0XHR0aGlzLmdldFVwbG9hZGVyKCkuYWRkRmlsZSggYmxvYiAsIG5hbWUgKTtcblxuXHRcdFx0dGhpcy5kaXNhYmxlZCggdHJ1ZSApO1xuXG5cdFx0XHR0aGlzLnRyaWdnZXIoICdhY3Rpb246dXBsb2FkOmRhdGFpbWFnZScgLCB0aGlzICk7XG5cdFx0fSxcblx0XHRzaG93OmZ1bmN0aW9uKCl7XG5cdFx0XHR0aGlzLiRlbC5zaG93KCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdGhpZGU6ZnVuY3Rpb24oKXtcblx0XHRcdHRoaXMuJGVsLmhpZGUoKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0ZGlzYWJsZWQgOiBmdW5jdGlvbiggZGlzYWJsZWQgKSB7XG5cdFx0XHR0aGlzLiRkaXNjYXJkQnRuLnByb3AoICdkaXNhYmxlZCcsIGRpc2FibGVkICk7XG5cdFx0XHR0aGlzLiR1cGxvYWRCdG4ucHJvcCggJ2Rpc2FibGVkJywgZGlzYWJsZWQgKTtcblx0XHR9LFxuXHRcdF91cGxvYWRTdWNjZXNzSGFuZGxlciA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy50cmlnZ2VyKCAnYWN0aW9uOnVwbG9hZGVkOmRhdGFpbWFnZScgKTtcblx0XHRcdHRoaXMuZGlzYWJsZWQoZmFsc2UpO1xuXHRcdFx0dGhpcy51bmJpbmRVcGxvYWRlckV2ZW50cygpO1xuXHRcdH0sXG5cdFx0X3VwbG9hZEVycm9ySGFuZGxlciA6IGZ1bmN0aW9uKHVwLGVycikge1xuXHRcdFx0dGhpcy50cmlnZ2VyKCAnZXJyb3I6dXBsb2FkZWQ6ZGF0YWltYWdlJywgZXJyICk7XG5cdFx0XHR0aGlzLmRpc2FibGVkKGZhbHNlKTtcblx0XHRcdHRoaXMudW5iaW5kVXBsb2FkZXJFdmVudHMoKTtcblx0XHR9LFxuXHRcdGJpbmRVcGxvYWRlckV2ZW50cyA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5nZXRVcGxvYWRlcigpLmJpbmQoICdGaWxlVXBsb2FkZWQnLFx0dGhpcy5fdXBsb2FkU3VjY2Vzc0hhbmRsZXIsXHR0aGlzICk7XG5cdFx0XHR0aGlzLmdldFVwbG9hZGVyKCkuYmluZCggJ0Vycm9yJyxcdFx0XHR0aGlzLl91cGxvYWRFcnJvckhhbmRsZXIsXHR0aGlzICk7XG5cdFx0fSxcblx0XHR1bmJpbmRVcGxvYWRlckV2ZW50cyA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5nZXRVcGxvYWRlcigpLnVuYmluZCggJ0ZpbGVVcGxvYWRlZCcsXHR0aGlzLl91cGxvYWRTdWNjZXNzSGFuZGxlcixcdHRoaXMgKTtcblx0XHRcdHRoaXMuZ2V0VXBsb2FkZXIoKS51bmJpbmQoICdFcnJvcicsXHRcdFx0dGhpcy5fdXBsb2FkRXJyb3JIYW5kbGVyLFx0dGhpcyApO1xuXHRcdH0sXG5cdFx0Z2V0VXBsb2FkZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuY29udHJvbGxlci51cGxvYWRlci51cGxvYWRlci51cGxvYWRlcjtcblx0XHR9XG5cdH0pO1xuXG5cblx0d3AubWVkaWEudGhlcGFzdGUudmlldy5QYXN0ZWJvYXJkID0gd3AubWVkaWEuVmlldy5leHRlbmQoe1xuXHRcdHRlbXBsYXRlOiB3cC50ZW1wbGF0ZSgndGhlcGFzdGUtcGFzdGVib2FyZCcpLFxuXHRcdGNsYXNzTmFtZTogJ3RoZXBhc3RlLXBhc3RlYm9hcmQnLFxuXHRcdGNvbnRyb2xsZXI6bnVsbCxcblx0XHRhY3Rpb246J3Bhc3RlJyxcblx0XHQkcGFzdGVib2FyZCA6IG51bGwsXG5cblx0XHRyZW5kZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0d3AubWVkaWEuVmlldy5wcm90b3R5cGUucmVuZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtcblx0XHRcdGNvbnNvbGUubG9nKCB0aGlzLiQoICcuaW5qZWN0b3InICkpO1xuXHRcdFx0dGhpcy4kcGFzdGVib2FyZCA9IHRoaXMuJCggJy5pbmplY3RvcicgKS5wYXN0YWJsZUNvbnRlbnRlZGl0YWJsZSgpO1xuXHRcdFx0dGhpcy4kbWVzc2FnZSA9IHRoaXMuJCggJy5tZXNzYWdlJyApO1xuXHRcdFx0dGhpcy4kcGFzdGVib2FyZC5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRzZWxmLnNob3dfbWVzc2FnZSgnJyk7XG5cdFx0XHR9ICk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdHN0YXJ0IDogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdGNsaXBib2FyZEhhc0ltYWdlO1xuXG5cdFx0XHR0aGlzLmltYWdlUGFzdGVkID0gZmFsc2U7XG5cblx0XHRcdHRoaXMuJHBhc3RlYm9hcmRcblx0XHRcdFx0Lm9uKCdwYXN0ZScsZnVuY3Rpb24oZSl7XG5cdFx0XHRcdFx0Y2xpcGJvYXJkSGFzSW1hZ2UgPSB3cC5tZWRpYS50aGVwYXN0ZS5jbGlwYm9hcmRIYXNJbWFnZShlLm9yaWdpbmFsRXZlbnQuY2xpcGJvYXJkRGF0YSk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5vbigncGFzdGVUZXh0JyAsIGZ1bmN0aW9uKCBlLCBkYXRhICkge1xuXG5cdFx0XHRcdFx0aWYgKCBjbGlwYm9hcmRIYXNJbWFnZSB8fCBzZWxmLmltYWdlUGFzdGVkICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzZWxmLnNob3dfbWVzc2FnZSggbDEwbi5wYXN0ZV9lcnJvcl9ub19pbWFnZSApO1xuXHRcdFx0XHRcdCQoIHRoaXMgKS5odG1sKCcnKTtcblx0XHRcdFx0fSApXG5cdFx0XHRcdC5vbigncGFzdGVJbWFnZScgLCBmdW5jdGlvbiggZSwgZGF0YSApIHtcblx0XHRcdFx0XHRpZiAoIHNlbGYuaW1hZ2VQYXN0ZWQgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHNlbGYudHJpZ2dlciggJ2FjdGlvbjpjcmVhdGU6ZGF0YWltYWdlJywgdGhpcyAsIGRhdGEuZGF0YVVSTCApO1xuXHRcdFx0XHRcdHNlbGYuaW1hZ2VQYXN0ZWQgPSB0cnVlO1xuXHRcdFx0XHR9IClcblx0XHRcdFx0Lm9uKCdwYXN0ZUltYWdlRXJyb3InICwgZnVuY3Rpb24oIGUsIGRhdGEgKSB7XG5cdFx0XHRcdFx0c2VsZi5zaG93X21lc3NhZ2UoIGwxMG4ucGFzdGVfZXJyb3IgKTtcblx0XHRcdFx0XHQkKCB0aGlzICkuaHRtbCgnJyk7XG5cdFx0XHRcdH0gKVxuXHRcdFx0XHQ7XG5cblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0c2VsZi4kcGFzdGVib2FyZC5nZXQoMCkuZm9jdXMoKTtcblx0XHRcdH0sMSk7XG5cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0c3RvcCA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy4kcGFzdGVib2FyZFxuXHRcdFx0XHQub2ZmKCdwYXN0ZUltYWdlJylcblx0XHRcdFx0Lm9mZigncGFzdGVJbWFnZUVycm9yJylcblx0XHRcdFx0Lm9mZigncGFzdGVUZXh0Jyk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdHNob3c6ZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLiRlbC5zaG93KCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdGhpZGU6ZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLiRlbC5oaWRlKCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdHNob3dfbWVzc2FnZTpmdW5jdGlvbiggbXNnICkge1xuXHRcdFx0dGhpcy4kbWVzc2FnZS50ZXh0KCBtc2cgKTtcblx0XHR9XG5cdH0pO1xuXG5cdHdwLm1lZGlhLnRoZXBhc3RlLnZpZXcuRGF0YVNvdXJjZUltYWdlR3JhYmJlciA9IHdwLm1lZGlhLlZpZXcuZXh0ZW5kKHtcbi8vXHRcdHRhZ05hbWU6ICAgJ2RpdicsXG5cdFx0dGVtcGxhdGU6IHdwLnRlbXBsYXRlKCd0aGVwYXN0ZS1ncmFiYmVyJyksXG5cdFx0Y2xhc3NOYW1lIDogJ3RoZXBhc3RlLWdyYWJiZXInLFxuXG5cdFx0Z3JhYmJlciA6IG51bGwsXG5cdFx0dXBsb2FkZXIgOiBudWxsLFxuXG5cdFx0aW5pdGlhbGl6ZSA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHJldCA9IHdwLm1lZGlhLlZpZXcucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXG5cdFx0XHRfLmRlZmF1bHRzKCB0aGlzLm9wdGlvbnMsIHtcblx0XHRcdFx0d3B1cGxvYWRlclx0XHQ6IG51bGwsXG5cdFx0XHRcdGRlZmF1bHRGaWxlTmFtZVx0OiBsMTBuLnBhc3RlZCxcblx0XHRcdFx0ZGVmYXVsdEZpbGVGb3JtYXQgOiAnaW1hZ2UvcG5nJyxcblx0XHRcdFx0dGl0bGVcdFx0XHQ6IGwxMG4uY29weV9wYXN0ZVxuXHRcdFx0fSk7XG5cblx0XHRcdHRoaXMuZ3JhYmJlciAgPSBuZXcgdGhpcy5vcHRpb25zLmdyYWJiZXIoIHsgY29udHJvbGxlclx0OiB0aGlzLmNvbnRyb2xsZXIgfSApO1xuXG5cdFx0XHR0aGlzLnVwbG9hZGVyID0gbmV3IHdwLm1lZGlhLnRoZXBhc3RlLnZpZXcuRGF0YVNvdXJjZUltYWdlVXBsb2FkZXIoIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXJcdFx0XHQ6IHRoaXMuY29udHJvbGxlcixcblx0XHRcdFx0XHRcdFx0XHRcdHVwbG9kZXJcdFx0XHRcdDogdGhpcy5vcHRpb25zLndwdXBsb2FkZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZWZhdWx0RmlsZU5hbWVcdFx0OiB0aGlzLm9wdGlvbnMuZGVmYXVsdEZpbGVOYW1lLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVmYXVsdEZpbGVGb3JtYXRcdDogdGhpcy5vcHRpb25zLmRlZmF1bHRGaWxlRm9ybWF0XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHR0aGlzLnJlbmRlcigpO1xuXG5cdFx0XHR0aGlzLmxpc3RlblRvKCB0aGlzLmdyYWJiZXIsICdhY3Rpb246Y3JlYXRlOmRhdGFpbWFnZScsXHR0aGlzLmltYWdlQ3JlYXRlZCApO1xuXHRcdFx0dGhpcy5saXN0ZW5UbyggdGhpcy51cGxvYWRlciwgJ2FjdGlvbjpkaXNjYXJkOmRhdGFpbWFnZScsXHR0aGlzLnN0YXJ0R3JhYmJpbmcgKTtcblxuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9LFxuXHRcdHJlbmRlcjpmdW5jdGlvbigpe1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHR3cC5tZWRpYS5WaWV3LnByb3RvdHlwZS5yZW5kZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXG5cdFx0XHR0aGlzLiQoJy5jb250ZW50Jylcblx0XHRcdFx0LmFwcGVuZCggdGhpcy5ncmFiYmVyLnJlbmRlcigpLiRlbCApXG5cdFx0XHRcdC5hcHBlbmQoIHRoaXMudXBsb2FkZXIucmVuZGVyKCkuJGVsICk7XG5cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdFx0aW1hZ2VDcmVhdGVkIDogZnVuY3Rpb24oIGdyYWJiZXIgLCBpbWFnZURhdGEgKSB7XG5cdFx0XHR0aGlzLmdyYWJiZXIuc3RvcCgpLmhpZGUoKTtcblx0XHRcdHRoaXMudXBsb2FkZXIuc2hvdygpLnNldEltYWdlRGF0YSggaW1hZ2VEYXRhICk7XG5cdFx0fSxcblx0XHRzdGFydEdyYWJiaW5nOmZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy51cGxvYWRlci5oaWRlKCk7XG5cdFx0XHR0aGlzLmdyYWJiZXIuc2hvdygpLnN0YXJ0KCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdHN0b3BHcmFiYmluZzpmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuZ3JhYmJlci5zdG9wKCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9LFxuXHRcdGdldEFjdGlvbiA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZ3JhYmJlci5hY3Rpb247XG5cdFx0fSxcblx0XHRkaXNtaXNzOmZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5ncmFiYmVyLnN0b3AoKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0fSk7XG5cbn0pKGpRdWVyeSx3aW5kb3csbU94aWUpO1xuIl19
